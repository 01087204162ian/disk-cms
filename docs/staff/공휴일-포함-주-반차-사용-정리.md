# 공휴일 포함 주 반차 사용 기준 정리

**작성일**: 2025-12-28  
**버전**: 2.0

---

## 핵심 원칙

### 공휴일 포함 주도 주 4일 근무를 유지하는 이유

**이유**: 공휴일이 있는 날은 **모든 사람이 공휴일로 쉬므로**, 이미 1일을 쉬게 됩니다.

**예시**: 공휴일이 목요일인 경우
- 목요일: 공휴일 (모든 사람이 쉼)
- 나머지 평일(월/화/수/금): 4일 근무
- **결과**: 주 4일 근무 자동 달성

**결론**: 공휴일 포함 주에는 **별도로 휴무일을 제공할 필요가 없습니다**.

---

## 공휴일 포함 주 처리 규칙

### 1. 휴무일 처리

**공휴일 포함 주**:
- 공휴일이 있는 날: 공휴일로 쉼 (모든 사람)
- 휴무일: **적용하지 않음** (공휴일로 이미 1일 쉼)
- 결과: 주 4일 근무 (공휴일 1일 + 평일 4일 근무)

**일반 주**:
- 휴무일: 적용됨
- 결과: 주 4일 근무 (휴무일 1일 + 평일 4일 근무)

### 2. 코드 로직

```javascript
// work-schedules.js
const isOffDay = weekHasHoliday 
    ? false  // 공휴일 포함 주는 휴무일 없음 (공휴일로 이미 1일 쉼)
    : ((dayOfWeek === offDay) && !isHolidayDate);  // 일반 주는 휴무일 적용
```

---

## 공휴일 포함 주에 반차 사용 시 처리

### 시나리오: 공휴일 포함 주에 반차 사용

**예시**: 2026년 1월 첫째 주
- 공휴일: 목요일 (신정)
- 반차 사용: 수요일 오후 반차

**반차 사용 전**:
- 월요일: 8시간 근무
- 화요일: 8시간 근무
- 수요일: 8시간 근무
- 목요일: 공휴일 (쉼)
- 금요일: 8시간 근무
- **총 근무 시간: 32시간** (주 4일 근무)

**반차 사용 후**:
- 월요일: 8시간 근무
- 화요일: 8시간 근무
- 수요일: 4시간 근무 (오후 반차)
- 목요일: 공휴일 (쉼)
- 금요일: 8시간 근무
- **총 근무 시간: 28시간** (4시간 부족)

### 차주 보충 규칙

**원칙**: 공휴일 포함 주에 반차 사용 시 부족한 4시간을 **다음 주 휴무일 중 반나절(4시간)을 회수**하여 보충합니다.

**처리 방법**:
1. 공휴일 포함 주에 반차 사용 → 28시간 근무 (4시간 부족)
2. 다음 주 휴무일 중 반나절(4시간) 회수
3. 다음 주: 휴무일 4시간 근무 + 나머지 4일 근무 = 36시간
4. **2주 평균: 32시간** (주 4일 근무 원칙 유지)

**예시**:
- 1주차 (공휴일 포함): 28시간 (반차 사용)
- 2주차: 36시간 (다음 주 휴무일에 4시간 추가 근무)
- **2주 평균: 32시간** ✅

---

## 반차 사용 기준 정리

### 1. 일반 주에 반차 사용

**규칙**: 같은 주 내에서 반차 사용하여 총 32시간 유지

**예시**: 화요일 휴무자가 목요일 오후 반차 신청
- 목요일: 4시간 근무 (오후 반차)
- 화요일: 4시간 근무 (원래 휴무 → 반일 근무)
- 나머지 날: 정상 근무
- **총 근무 시간: 32시간** ✅

### 2. 공휴일 포함 주에 반차 사용

**규칙**: 다음 주 휴무일 중 반나절(4시간) 회수하여 보충

**예시**: 공휴일 포함 주에 수요일 오후 반차 신청
- 1주차: 28시간 (반차 사용)
- 2주차: 36시간 (다음 주 휴무일에 4시간 추가 근무)
- **2주 평균: 32시간** ✅

### 3. 휴무일에 반차 사용

**규칙**: 휴무일에 반차 사용 가능 (같은 주 다른 날에도 반차 사용하여 총 32시간 유지)

**예시**: 화요일 휴무자가 화요일 오후 반차 신청
- 화요일: 4시간 근무 (원래 휴무 → 반일 근무)
- 같은 주 다른 날: 반차 사용하여 총 32시간 유지
- **총 근무 시간: 32시간** ✅

---

## 시스템 구현 방안

### 현재 상태

✅ **반차 사용 허용**
- 공휴일 포함 주에도 반차 사용 가능
- 휴무일에 반차 사용 가능

⚠️ **차주 보충 로직 미구현**
- 공휴일 포함 주에 반차 사용 시 차주 보충 자동 처리 필요
- 다음 주 휴무일 중 반나절 회수 기능 필요

### 향후 구현 필요 사항

1. **차주 보충 자동 처리**
   - 공휴일 포함 주에 반차 사용 시 자동으로 다음 주 보충 일정 생성
   - 다음 주 휴무일에 4시간 추가 근무 일정 생성

2. **보충 일정 관리**
   - 보충 일정 표시 및 관리
   - 관리자 승인 워크플로우

3. **근무 시간 통계**
   - 주간/월간 근무 시간 계산 시 차주 보충 반영
   - 2주 평균 32시간 유지 확인

---

## 요약

### 공휴일 포함 주 처리

1. **공휴일 포함 주도 주 4일 근무 유지**
   - 이유: 공휴일로 이미 1일을 쉬므로 별도 휴무일 불필요
   - 처리: 공휴일 1일 + 평일 4일 근무 = 주 4일 근무

2. **반차 사용 시 차주 보충**
   - 공휴일 포함 주에 반차 사용 → 28시간 (4시간 부족)
   - 다음 주 휴무일 중 반나절(4시간) 회수
   - 2주 평균 32시간 유지

### 반차 사용 기준

- **일반 주**: 같은 주 내에서 반차 사용하여 총 32시간 유지
- **공휴일 포함 주**: 다음 주 휴무일 중 반나절 회수하여 보충
- **휴무일**: 휴무일에 반차 사용 가능 (같은 주 다른 날에도 반차 사용)

---

**문서 버전**: 2.0  
**최종 업데이트**: 2025-12-28  
**작성자**: 시스템 개발팀

