# 작업 로그 - 2025-02-21

## 주요 변경
- KJ 대리운전 회사/기사 모달 공통화
  - 모달 크기 `modal-xl`(95%) 및 스크롤 영역 지정.
  - 기본 정보 테이블 2행×8열(4쌍) 재구성.
  - 증권 테이블 행 수를 “기존 데이터 + 1 신규 행”(최대 10행)으로 렌더링.
  - 마지막(신규) 행에서는 상태/인원/신규/배서/결제방식/보험료/성격/회차를 숨김.
  - 신규 행: 보험사 선택 시 저장 버튼 표시, 필수값(보험사·시작일·증권번호·분납) 입력 시 활성화.
  - 저장/수정 버튼 클릭 시 모달 재조회(실제 저장 API 연동 시 성공 콜백에서 사용 예정).
  - 보험사 옵션 10종(=선택=/흥국/DB/KB/현대/롯데/더케이/MG/삼성/메리츠), 성격 옵션 5종(일반/탁송/일반·렌트/탁송·렌트/전차량).

- 백엔드 상세 API 확장 (`pci0327/api/insurance/kj-company-detail.php`)
  - 증권별 납입 상태 계산(nabState 로직), 총 인원 합계 포함.
  - 메모 목록(ssang_c_memo), SMS 목록(SMSData) 조회 및 응답에 포함.
  - 증권별 content, 보험사 코드 매핑, 성격/결제방식 매핑 추가.

## 남은 작업/주의사항
- 증권 저장/수정, 회차 변경, 결제방식/보험료, 신규/배서/인원 모달 등 **실제 저장 API 연동** 필요(현재는 UI 및 재조회 트리거만 구현).
- 인원/신규/배서/보험료 모달 화면 및 엔드포인트 스펙 정의 필요.

## 변경 파일
- `public/js/insurance/kj-driver-search.js`
- `public/js/insurance/kj-driver-company.js`
- `public/pages/insurance/kj-driver-search.html`
- `public/pages/insurance/kj-driver-company.html`
- `pci0327/api/insurance/kj-company-detail.php`

