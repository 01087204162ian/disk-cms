

# KJ ëŒ€ë¦¬ìš´ì „ ë³´í—˜ ì‹œìŠ¤í…œ ê°œìš”

**ì‘ì„±ì¼**: 2025-12-20  
**ì‹œìŠ¤í…œ**: CMS ê¸°ë°˜ ëŒ€ë¦¬ìš´ì „ ë³´í—˜ ê´€ë¦¬ ì‹œìŠ¤í…œ

---

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°](#í”„ë¡ íŠ¸ì—”ë“œ-êµ¬ì¡°)
3. [ë°±ì—”ë“œ API êµ¬ì¡°](#ë°±ì—”ë“œ-api-êµ¬ì¡°)
4. [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
5. [ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°](#ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¡°)
6. [API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡](#api-ì—”ë“œí¬ì¸íŠ¸-ëª©ë¡)

---

## ì‹œìŠ¤í…œ ê°œìš”

### ì•„í‚¤í…ì²˜
- **í”„ë¡ íŠ¸ì—”ë“œ**: HTML + JavaScript (Vanilla JS) + Bootstrap 5
- **ì¤‘ê°„ ê³„ì¸µ**: Node.js/Express í”„ë¡ì‹œ ë¼ìš°í„°
- **ë°±ì—”ë“œ**: PHP 7.x+ (PDO, JSON ì‘ë‹µ)
- **ë°ì´í„°ë² ì´ìŠ¤**: MySQL/MariaDB

### ì£¼ìš” íŠ¹ì§•
- RESTful API ê¸°ë°˜ JSON í†µì‹ 
- UTF-8 ì¸ì½”ë”©
- CORS ì§€ì›
- íŠ¸ëœì­ì…˜ ê¸°ë°˜ ë°ì´í„° ì²˜ë¦¬
- ë¡œê¹… ì‹œìŠ¤í…œ (logs í´ë”)

---

## í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

### í˜ì´ì§€ ëª©ë¡ (5ê°œ)

| í˜ì´ì§€ | íŒŒì¼ëª… | ì£¼ìš” ê¸°ëŠ¥ |
|--------|--------|-----------|
| **ëŒ€ë¦¬ì—…ì²´ ê´€ë¦¬** | `kj-driver-company.html` | ì—…ì²´ ëª©ë¡ ì¡°íšŒ, í•„í„°ë§, ìƒì„¸ ëª¨ë‹¬ |
| **ë°°ì„œ ë¦¬ìŠ¤íŠ¸** | `kj-driver-endorse-list.html` | ë°°ì„œ ì²˜ë¦¬ ìƒíƒœ ê´€ë¦¬, ë³´í—˜ë£Œ ê³„ì‚° |
| **ê¸°ì‚¬ ì°¾ê¸°** | `kj-driver-search.html` | ì´ë¦„/ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ |
| **ì¦ê¶Œë²ˆí˜¸ ì°¾ê¸°** | `kj-driver-policy-search.html` | ê³„ì•½ìëª…/ì°¨ëŸ‰ë²ˆí˜¸ ê²€ìƒ‰ |
| **ì¦ê¶Œë³„ ì½”ë“œ** | `kj-driver-code-by-policy.html` | ì¦ê¶Œ ìƒì„¸ ì •ë³´, ë‹´ë‹¹ìë³„ ë³´í—˜ë£Œ í†µê³„ |

### JavaScript íŒŒì¼ (6ê°œ)

| íŒŒì¼ëª… | ì—°ê²° í˜ì´ì§€ | ì£¼ìš” ê¸°ëŠ¥ |
|--------|------------|-----------|
| `kj-driver-company.js` | kj-driver-company.html | ì—…ì²´ ëª©ë¡ ì¡°íšŒ, í•„í„°ë§, ëª¨ë‹¬ |
| `kj-driver-endorse-list.js` | kj-driver-endorse-list.html | ë°°ì„œ ìƒíƒœ ì—…ë°ì´íŠ¸, ë³´í—˜ë£Œ ê³„ì‚° |
| `kj-driver-search.js` | kj-driver-search.html | ê¸°ì‚¬ ê²€ìƒ‰ |
| `kj-driver-code-by-policy.js` | kj-driver-code-by-policy.html | ì¦ê¶Œ ìƒì„¸, ë³´í—˜ë£Œ í†µê³„ ë Œë”ë§ |
| `kj-company-modal.js` | ê³µí†µ | ì—…ì²´ ìƒì„¸ ì •ë³´ ëª¨ë‹¬ |
| `kj-constants.js` | ê³µí†µ | ìƒìˆ˜ ì •ì˜ |

---

## ë°±ì—”ë“œ API êµ¬ì¡°

### PHP API íŒŒì¼ (35ê°œ)

#### ì—…ì²´ ê´€ë¦¬ (5ê°œ)
- `kj-company-list.php` - ì—…ì²´ ëª©ë¡ ì¡°íšŒ
- `kj-company-detail.php` - ì—…ì²´ ìƒì„¸ ì •ë³´
- `kj-company-managers.php` - ë‹´ë‹¹ì ëª©ë¡
- `kj-company-check-jumin.php` - ì£¼ë¯¼ë²ˆí˜¸ë¡œ ê¸°ì¡´ íšŒì‚¬ ì¡°íšŒ
- `kj-company-store.php` - ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ì‹ ê·œ ë“±ë¡/ìˆ˜ì •

#### ì¦ê¶Œ ê´€ë¦¬ (7ê°œ)
- `kj-policy-search.php` - ì¦ê¶Œ ê²€ìƒ‰
- `kj-certi-detail.php` - ì¦ê¶Œ ìƒì„¸
- `kj-certi-save.php` - ì¦ê¶Œ ì €ì¥
- `kj-certi-update.php` - ì¦ê¶Œ ìˆ˜ì •
- `kj-certi-update-divi.php` - ê²°ì œë°©ì‹ ë³€ê²½
- `kj-certi-update-gita.php` - ì¦ê¶Œì„±ê²© ë³€ê²½
- `kj-certi-update-nabang.php` - íšŒì°¨ ë³€ê²½
- `kj-certi-member-list.php` - ì¦ê¶Œë³„ ëŒ€ë¦¬ê¸°ì‚¬ ë¦¬ìŠ¤íŠ¸

#### ë°°ì„œ ì²˜ë¦¬ (8ê°œ)
- `kj-endorse-list.php` - ë°°ì„œ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
- `kj-endorse-save.php` - ë°°ì„œ ì €ì¥
- `kj-endorse-update-status.php` - ë°°ì„œ ìƒíƒœ ì—…ë°ì´íŠ¸ (í•µì‹¬)
- `kj-endorse-update-member.php` - íšŒì› ì •ë³´ ì—…ë°ì´íŠ¸
- `kj-endorse-update-endorse-day.php` - ë°°ì„œê¸°ì¤€ì¼ ì—…ë°ì´íŠ¸
- `kj-endorse-termination.php` - í•´ì§€ ì‹ ì²­
- `kj-endorse-policy-list.php` - ì¦ê¶Œë²ˆí˜¸ ëª©ë¡
- `kj-endorse-company-list.php` - ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ëª©ë¡

#### ì¼ì¼ë°°ì„œ ì²˜ë¦¬ (5ê°œ)
- `kj-daily-endorse-search.php` - ì¼ì¼ë°°ì„œë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
- `kj-daily-endorse-company-list.php` - ì¼ì¼ë°°ì„œ ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ëª©ë¡
- `kj-daily-endorse-certi-list.php` - ì¼ì¼ë°°ì„œ ì¦ê¶Œë²ˆí˜¸ ëª©ë¡
- `kj-daily-endorse-status.php` - ë°°ì„œí˜„í™© ì¡°íšŒ (ê²€í†  ë²„íŠ¼ìš©)
- `kj-daily-endorse-current-situation.php` - ì¼ì¼ë°°ì„œí˜„í™© ì¡°íšŒ (ìš”ì¼ë³„ í‰ê· )

#### ë¬¸ì(SMS) ì²˜ë¦¬ (1ê°œ)
- `kj-sms-list.php` - ë¬¸ìë¦¬ìŠ¤íŠ¸ ì¡°íšŒ

#### ë³´í—˜ë£Œ ê´€ë¦¬ (6ê°œ)
- `kj-policy-stats.php` - ì¦ê¶Œë³„ ë³´í—˜ë£Œ í†µê³„ (ë‹´ë‹¹ìë³„ ì§€ì›)
- `kj-premium-data.php` - ì›”ë³´í—˜ë£Œ ì¡°íšŒ
- `kj-premium-save.php` - ì›”ë³´í—˜ë£Œ ì €ì¥
- `kj-insurance-premium-data.php` - ë³´í—˜ë£Œ ë°ì´í„° ì¡°íšŒ/ì €ì¥
- `kj-rate-update.php` - í• ì¸í• ì¦ë¥  ì—…ë°ì´íŠ¸
- `kj-driver-list.php` - ëŒ€ë¦¬ê¸°ì‚¬ ëª©ë¡

#### ë§ˆì´ê·¸ë ˆì´ì…˜ (2ê°œ)
- `kj-migrate-premium-data.php` - ë³´í—˜ë£Œ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
- `kj-migrate-cpreminum-to-premium-data.php` - 2012Cpreminum ë§ˆì´ê·¸ë ˆì´ì…˜

#### ìœ í‹¸ë¦¬í‹° (1ê°œ)
- `kj-endorse-utils.php` - ê³µí†µ í•¨ìˆ˜ (ë³´í—˜ë£Œ ê³„ì‚°, í• ì¸í• ì¦ë¥ , ì•”í˜¸í™”)

---

## ì£¼ìš” ê¸°ëŠ¥

### 1. ì—…ì²´ ê´€ë¦¬

**ê¸°ëŠ¥**:
- ì—…ì²´ ëª©ë¡ ì¡°íšŒ (ë‚ ì§œ/ë‹´ë‹¹ì/ê²€ìƒ‰ì–´ í•„í„°)
- ì—…ì²´ ìƒì„¸ ì •ë³´ ì¡°íšŒ (ëª¨ë‹¬)
- **ì‹ ê·œ ì—…ì²´ ë“±ë¡** (ì£¼ë¯¼ë²ˆí˜¸ ê²€ì¦, ê¸°ë³¸ ì •ë³´ ì…ë ¥)
- **ì—…ì²´ ì •ë³´ ìˆ˜ì •** (ì£¼ë¯¼ë²ˆí˜¸, íšŒì‚¬ëª…, ëŒ€í‘œì, ì—°ë½ì²˜, ì£¼ì†Œ ë“±)
- í˜ì´ì§• ì§€ì›

**ì£¼ìš” API**:
- `GET /api/insurance/kj-company/list` - ëª©ë¡ ì¡°íšŒ
- `GET /api/insurance/kj-company/:companyNum` - ìƒì„¸ ì¡°íšŒ
- `GET /api/insurance/kj-company/check-jumin` - ì£¼ë¯¼ë²ˆí˜¸ë¡œ ê¸°ì¡´ íšŒì‚¬ ì¡°íšŒ
- `POST /api/insurance/kj-company/store` - ì‹ ê·œ ë“±ë¡/ìˆ˜ì •

### 2. ë°°ì„œ ì²˜ë¦¬

**ê¸°ëŠ¥**:
- ë°°ì„œ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ (ë‹¤ì–‘í•œ í•„í„° ì§€ì›)
- ë°°ì„œ ìƒíƒœ ì—…ë°ì´íŠ¸ (ë¯¸ì²˜ë¦¬ â†’ ì²˜ë¦¬)
- ë³´í—˜ë£Œ ìë™ ê³„ì‚°
- SMS ìë™ ë°œì†¡
- í˜„ëŒ€í•´ìƒ API ì—°ë™

**ì£¼ìš” API**:
- `GET /api/insurance/kj-endorse/list` - ë°°ì„œ ë¦¬ìŠ¤íŠ¸
- `POST /api/insurance/kj-endorse/update-status` - ìƒíƒœ ì—…ë°ì´íŠ¸
- `POST /api/insurance/kj-endorse/save` - ë°°ì„œ ì €ì¥

**ì²˜ë¦¬ ìƒíƒœ (sangtae)**:
- `1`: ë¯¸ì²˜ë¦¬
- `2`: ì²˜ë¦¬ ì™„ë£Œ

**ë°°ì„œ ìƒíƒœ (push)**:
- `1`: ì²­ì•½ (ì‹ ì²­ ìƒíƒœ)
- `2`: í•´ì§€ ì™„ë£Œ
- `4`: ì •ìƒ ì²˜ë¦¬ (ê°€ì…ì™„ë£Œ)

**ë°°ì„œ ì²˜ë¦¬ ìœ í˜• (endorseProcess)**:
- ì²­ì•½ ìƒíƒœ(push=1)ì—ì„œ: "ì²­ì•½", "ì·¨ì†Œ", "ê±°ì ˆ"
- í•´ì§€ ìƒíƒœ(push=4)ì—ì„œ: "í•´ì§€", "ì·¨ì†Œ"

### 3. ë³´í—˜ë£Œ ê³„ì‚°

**ê³„ì‚° í•­ëª©**:
1. **1/10 ë³´í—˜ë£Œ** (`payment10_premium1`): 10íšŒ ë¶„ë‚© ì¤‘ 1íšŒ ë³´í—˜ë£Œ
2. **íšŒì‚¬ë³´í—˜ë£Œ** (`payment10_premium_total`): 10íšŒ ë¶„ë‚© ë³´í—˜ë£Œ ì´í•©
3. **í™˜ì‚°ë³´í—˜ë£Œ** (`premiumTotalMonthly`): íšŒì‚¬ë³´í—˜ë£Œ Ã— 10/12
4. **ì›”ë³´í—˜ë£Œ** (`totalMonthAdjustedPremium`): í• ì¸í• ì¦ ì ìš© í›„ ì‹¤ì œ ì›” ë‚©ì… ë³´í—˜ë£Œ

**í• ì¸í• ì¦ë¥  (rate)**:
- 1~14ë²ˆ ì½”ë“œ ì§€ì› (0.889 ~ 1.459)
- `2019rate` í…Œì´ë¸” ìš°ì„  ì¡°íšŒ, ì—†ìœ¼ë©´ `2012DaeriMember.rate` ì‚¬ìš©
- ì¡°í•©(`union_=1`)ì¸ ê²½ìš° í• ì¸í• ì¦ ë¬´ì‹œ

**ì£¼ìš” API**:
- `GET /api/insurance/kj-code/policy-num-stats?certi=ì¦ê¶Œë²ˆí˜¸&by_manager=1` - ë‹´ë‹¹ìë³„ ë³´í—˜ë£Œ í†µê³„

### 4. ì¦ê¶Œ ê´€ë¦¬

**ê¸°ëŠ¥**:
- ì¦ê¶Œ ê²€ìƒ‰ ë° ìƒì„¸ ì¡°íšŒ
- ì¦ê¶Œ ì •ë³´ ìˆ˜ì • (ê²°ì œë°©ì‹, ì¦ê¶Œì„±ê²©, íšŒì°¨ ë“±)
- ì¦ê¶Œë³„ ëŒ€ë¦¬ê¸°ì‚¬ ëª©ë¡ ì¡°íšŒ
- ë‹´ë‹¹ìë³„ ë³´í—˜ë£Œ í†µê³„ í‘œì‹œ

**ì£¼ìš” API**:
- `GET /api/insurance/kj-code/policy-search` - ì¦ê¶Œ ê²€ìƒ‰
- `POST /api/insurance/kj-code/policy-num-detail` - ì¦ê¶Œ ìƒì„¸
- `POST /api/insurance/kj-certi/update` - ì¦ê¶Œ ìˆ˜ì •

---

## ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ì£¼ìš” í…Œì´ë¸”

#### 1. 2012DaeriCompany (ëŒ€ë¦¬ìš´ì „ ì—…ì²´)
- `num`: ì—…ì²´ ë²ˆí˜¸ (PK)
- `company`: ì—…ì²´ëª…
- `Pname`: ëŒ€í‘œìëª…
- `jumin`: ì£¼ë¯¼ë²ˆí˜¸ (í•˜ì´í”ˆ í¬í•¨ í˜•ì‹)
- `hphone`: í•¸ë“œí°ë²ˆí˜¸
- `cphone`: ì „í™”ë²ˆí˜¸
- `cNumber`: ì‚¬ì—…ìë²ˆí˜¸
- `lNumber`: ë²•ì¸ë²ˆí˜¸
- `postNum`: ìš°í¸ë²ˆí˜¸
- `address1`: ê¸°ë³¸ì£¼ì†Œ
- `address2`: ìƒì„¸ì£¼ì†Œ
- `MemberNum`: ë‹´ë‹¹ì ë²ˆí˜¸ (FK â†’ 2012Member.num)
- `FirstStart`: ì²« ê³„ì•½ì¼
- `divi`: ê²°ì œë°©ì‹ (1=ì •ìƒë¶„ë‚©, ê¸°íƒ€=ì¼ì‹œë‚©)

#### 2. 2012DaeriMember (ëŒ€ë¦¬ê¸°ì‚¬)
- `num`: íšŒì› ë²ˆí˜¸ (PK)
- `2012DaeriCompanyNum`: ì—…ì²´ ë²ˆí˜¸ (FK)
- `CertiTableNum`: ì¦ê¶Œ í…Œì´ë¸” ë²ˆí˜¸ (FK)
- `Name`: ì´ë¦„
- `Jumin`: ì£¼ë¯¼ë²ˆí˜¸ (ì•”í˜¸í™” ê°€ëŠ¥)
- `Hphone`: ì „í™”ë²ˆí˜¸ (ì•”í˜¸í™” ê°€ëŠ¥)
- `push`: ë°°ì„œ ìƒíƒœ (1=ì²­ì•½, 2=í•´ì§€, 4=ì •ìƒ)
- `sangtae`: ì²˜ë¦¬ ìƒíƒœ (1=ë¯¸ì²˜ë¦¬, 2=ì²˜ë¦¬)
- `cancel`: ì·¨ì†Œ/ê±°ì ˆ ì½”ë“œ (12=ì²­ì•½ì·¨ì†Œ, 13=ì²­ì•½ê±°ì ˆ, 42=í•´ì§€ì™„ë£Œ, 45=í•´ì§€ì·¨ì†Œ)
- `progress`: ì§„í–‰ë‹¨ê³„ (1~8)
- `manager`: ì²˜ë¦¬ì
- `reasion`: ì²˜ë¦¬ ì‚¬ìœ 
- `rate`: í• ì¸í• ì¦ ì½”ë“œ (1~14)
- `endorse_day`: ë°°ì„œê¸°ì¤€ì¼
- `dongbuCerti`: ë™ë¶€ ì¦ê¶Œë²ˆí˜¸

#### 3. 2012CertiTable (ì¦ê¶Œ í…Œì´ë¸”)
- `num`: ì¦ê¶Œ í…Œì´ë¸” ë²ˆí˜¸ (PK)
- `certi`: ì¦ê¶Œë²ˆí˜¸
- `company`: íšŒì‚¬ëª…
- `name`: ê³„ì•½ìëª…
- `policyNum`: ì¦ê¶Œë²ˆí˜¸ (ì „ì²´)
- `InsuraneCompany`: ë³´í—˜íšŒì‚¬ ì½”ë“œ
- `divi`: ê²°ì œë°©ì‹
- `gita`: ì¦ê¶Œì„±ê²©
- `nab`: íšŒì°¨

#### 4. 2012Certi (ì¦ê¶Œ)
- `certi`: ì¦ê¶Œë²ˆí˜¸ (PK)
- `company`: íšŒì‚¬ëª…
- `name`: ê³„ì•½ìëª…
- `jumin`: ì£¼ë¯¼ë²ˆí˜¸
- `insurance`: ë³´í—˜íšŒì‚¬
- `sigi`: ì‹œì‘ì¼
- `nab`: íšŒì°¨

#### 5. kj_insurance_premium_data (ë³´í—˜ë£Œ ë°ì´í„°)
- `policyNum`: ì¦ê¶Œë²ˆí˜¸ (PK)
- `start_month`: ì—°ë ¹ êµ¬ê°„ ì‹œì‘ì›”
- `end_month`: ì—°ë ¹ êµ¬ê°„ ì¢…ë£Œì›”
- `payment10_premium1`: 1/10 ë³´í—˜ë£Œ
- `payment10_premium_total`: íšŒì‚¬ë³´í—˜ë£Œ

#### 6. kj_premium_data (ì›”ë³´í—˜ë£Œ ë°ì´í„°)
- `cNum`: ì¦ê¶Œ í…Œì´ë¸” ë²ˆí˜¸ (FK)
- `monthly_premium_total`: ì›”ë³´í—˜ë£Œ ì´ì•¡

#### 7. 2019rate (í• ì¸í• ì¦ë¥ )
- `policy`: ì¦ê¶Œë²ˆí˜¸
- `jumin`: ì£¼ë¯¼ë²ˆí˜¸
- `rate`: í• ì¸í• ì¦ ì½”ë“œ (1~14)

#### 8. 2012Member (ë‹´ë‹¹ì)
- `num`: ë‹´ë‹¹ì ë²ˆí˜¸ (PK)
- `name`: ë‹´ë‹¹ìëª…
- 1~4ë²ˆ ë‹´ë‹¹ìë¡œ êµ¬ë¶„

---

## API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

### ì—…ì²´ ê´€ë ¨

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|-----------|------|
| GET | `/api/insurance/kj-company/list` | ì—…ì²´ ëª©ë¡ ì¡°íšŒ |
| GET | `/api/insurance/kj-company/:companyNum` | ì—…ì²´ ìƒì„¸ ì •ë³´ |
| GET | `/api/insurance/kj-company/managers` | ë‹´ë‹¹ì ëª©ë¡ |
| GET | `/api/insurance/kj-company/check-jumin` | ì£¼ë¯¼ë²ˆí˜¸ë¡œ ê¸°ì¡´ íšŒì‚¬ ì¡°íšŒ |
| POST | `/api/insurance/kj-company/store` | ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ì‹ ê·œ ë“±ë¡/ìˆ˜ì • |

### ì¦ê¶Œ ê´€ë ¨

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|-----------|------|
| GET | `/api/insurance/kj-code/policy-search` | ì¦ê¶Œ ê²€ìƒ‰ |
| POST | `/api/insurance/kj-code/policy-num-detail` | ì¦ê¶Œ ìƒì„¸ |
| GET | `/api/insurance/kj-code/policy-num-stats` | ì¦ê¶Œë³„ ë³´í—˜ë£Œ í†µê³„ |
| POST | `/api/insurance/kj-certi/save` | ì¦ê¶Œ ì €ì¥ |
| POST | `/api/insurance/kj-certi/update` | ì¦ê¶Œ ìˆ˜ì • |
| GET | `/api/insurance/kj-certi/update-divi` | ê²°ì œë°©ì‹ ë³€ê²½ |
| GET | `/api/insurance/kj-certi/update-gita` | ì¦ê¶Œì„±ê²© ë³€ê²½ |
| GET | `/api/insurance/kj-certi/update-nabang` | íšŒì°¨ ë³€ê²½ |
| GET | `/api/insurance/kj-certi/member-list` | ì¦ê¶Œë³„ ëŒ€ë¦¬ê¸°ì‚¬ ë¦¬ìŠ¤íŠ¸ |

### ë°°ì„œ ê´€ë ¨

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|-----------|------|
| GET | `/api/insurance/kj-endorse/list` | ë°°ì„œ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ |
| POST | `/api/insurance/kj-endorse/save` | ë°°ì„œ ì €ì¥ |
| POST | `/api/insurance/kj-endorse/update-status` | ë°°ì„œ ìƒíƒœ ì—…ë°ì´íŠ¸ |
| POST | `/api/insurance/kj-endorse/update-member` | íšŒì› ì •ë³´ ì—…ë°ì´íŠ¸ |
| POST | `/api/insurance/kj-endorse/update-endorse-day` | ë°°ì„œê¸°ì¤€ì¼ ì—…ë°ì´íŠ¸ |
| POST | `/api/insurance/kj-endorse/termination` | í•´ì§€ ì‹ ì²­ |
| GET | `/api/insurance/kj-endorse/policy-list` | ì¦ê¶Œë²ˆí˜¸ ëª©ë¡ |
| GET | `/api/insurance/kj-endorse/company-list` | ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ëª©ë¡ |
| POST | `/api/insurance/kj-endorse/rate-update` | í• ì¸í• ì¦ë¥  ì—…ë°ì´íŠ¸ |

### ì¼ì¼ë°°ì„œ ê´€ë ¨

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|-----------|------|
| POST | `/api/insurance/kj-daily-endorse/search` | ì¼ì¼ë°°ì„œë¦¬ìŠ¤íŠ¸ ì¡°íšŒ |
| GET | `/api/insurance/kj-daily-endorse/company-list` | ì¼ì¼ë°°ì„œ ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ëª©ë¡ |
| GET | `/api/insurance/kj-daily-endorse/certi-list` | ì¼ì¼ë°°ì„œ ì¦ê¶Œë²ˆí˜¸ ëª©ë¡ |
| POST | `/api/insurance/kj-daily-endorse/status` | ë°°ì„œí˜„í™© ì¡°íšŒ (ê²€í†  ë²„íŠ¼ìš©) |
| POST | `/api/insurance/kj-daily-endorse/current-situation` | ì¼ì¼ë°°ì„œí˜„í™© ì¡°íšŒ (ìš”ì¼ë³„ í‰ê· ) |

### ë¬¸ì(SMS) ê´€ë ¨

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|-----------|------|
| POST | `/api/insurance/kj-sms/list` | ë¬¸ìë¦¬ìŠ¤íŠ¸ ì¡°íšŒ (ë‚ ì§œ ë²”ìœ„/ì „í™”ë²ˆí˜¸/ëŒ€ë¦¬ìš´ì „íšŒì‚¬) |

### ë³´í—˜ë£Œ ê´€ë ¨

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|-----------|------|
| GET | `/api/insurance/kj-premium` | ì›”ë³´í—˜ë£Œ ì¡°íšŒ |
| POST | `/api/insurance/kj-premium/save` | ì›”ë³´í—˜ë£Œ ì €ì¥ |
| GET | `/api/insurance/kj-insurance-premium-data` | ë³´í—˜ë£Œ ë°ì´í„° ì¡°íšŒ |
| POST | `/api/insurance/kj-insurance-premium-data` | ë³´í—˜ë£Œ ë°ì´í„° ì €ì¥ |

### ê²€ìƒ‰ ê´€ë ¨

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|-----------|------|
| GET | `/api/insurance/kj-driver/list` | ëŒ€ë¦¬ê¸°ì‚¬ ëª©ë¡ ê²€ìƒ‰ |

### ë§ˆì´ê·¸ë ˆì´ì…˜

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|-----------|------|
| GET | `/api/insurance/kj-migrate-premium-data` | ë³´í—˜ë£Œ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ |
| GET | `/api/insurance/kj-migrate-cpreminum-to-premium-data` | 2012Cpreminum ë§ˆì´ê·¸ë ˆì´ì…˜ |

---

## í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

### ë°°ì„œ ìƒíƒœ ì—…ë°ì´íŠ¸ í”„ë¡œì„¸ìŠ¤

```
1. ì…ë ¥ ê²€ì¦
   - num, sangtae í•„ìˆ˜
   - sangtae=2ì¼ ë•Œ manager í•„ìˆ˜
   - ì´ë¯¸ ì²˜ë¦¬ëœ ê±´(sangtae=2) ì²´í¬

2. push/cancel ê°’ ê³„ì‚°
   - push=1 (ì²­ì•½) â†’ "ì²­ì•½" ì„ íƒ ì‹œ: push=4, cancel=null
   - push=1 (ì²­ì•½) â†’ "ì·¨ì†Œ" ì„ íƒ ì‹œ: push=1, cancel=12
   - push=1 (ì²­ì•½) â†’ "ê±°ì ˆ" ì„ íƒ ì‹œ: push=1, cancel=13
   - push=4 (í•´ì§€) â†’ "í•´ì§€" ì„ íƒ ì‹œ: push=2, cancel=42
   - push=4 (í•´ì§€) â†’ "ì·¨ì†Œ" ì„ íƒ ì‹œ: push=4, cancel=45

3. ë³´í—˜ë£Œ ê³„ì‚° (ì²­ì•½ ì²˜ë¦¬ ì‹œ)
   - í• ì¸í• ì¦ë¥  í™•ì¸ (rate í•„ìˆ˜)
   - calculateProRatedFee: ì›”ë³´í—˜ë£Œ ê³„ì‚°
   - calculateEndorsePremium: íšŒì‚¬ë³´í—˜ë£Œ ê³„ì‚°

4. SMS ë°œì†¡
   - divi=1 (ì •ìƒë¶„ë‚©): ë…„ë³´í—˜ë£Œ, ë°°ì„œë³´í—˜ë£Œ ë©”ì‹œì§€
   - diviâ‰ 1 (ì¼ì‹œë‚©): ë…„ë³´í—˜ë£Œ ë©”ì‹œì§€
   - ì·¨ì†Œ/ê±°ì ˆ ì‹œ: ì·¨ì†Œ/ê±°ì ˆ ë©”ì‹œì§€

5. í˜„ëŒ€í•´ìƒ API í˜¸ì¶œ (insuranceCompany=2, push=4)
   - ê¸°ì‚¬ ì •ë³´ ì „ì†¡

6. DB ì—…ë°ì´íŠ¸
   - sangtae, push, cancel, manager, reasion ì—…ë°ì´íŠ¸
   - ë³´í—˜ë£Œ í•„ë“œ ì—…ë°ì´íŠ¸
```

### í• ì¸í• ì¦ë¥  ì ìš© ê·œì¹™

```php
rate ì½”ë“œ â†’ í• ì¸í• ì¦ë¥ 
1  â†’ 1.000 (ê¸°ë³¸)
2  â†’ 0.900 (í• ì¸)
3  â†’ 0.925 (ë¬´ì‚¬ê³  1ë…„ ì´ìƒ)
4  â†’ 0.898 (ë¬´ì‚¬ê³  2ë…„ ì´ìƒ)
5  â†’ 0.889 (ë¬´ì‚¬ê³  3ë…„ ì´ìƒ)
6  â†’ 1.074 (ì‚¬ê³  1ê±´)
7  â†’ 1.085 (ì‚¬ê³  1ê±´)
8  â†’ 1.242 (ì‚¬ê³  2ê±´)
9  â†’ 1.253 (ì‚¬ê³  2ê±´)
10 â†’ 1.314 (ì‚¬ê³  2ê±´)
11 â†’ 1.428 (ì‚¬ê³  3ê±´ ì´ìƒ)
12 â†’ 1.435 (ì‚¬ê³  3ê±´ ì´ìƒ)
13 â†’ 1.447 (ì‚¬ê³  3ê±´ ì´ìƒ)
14 â†’ 1.459 (ì‚¬ê³  3ê±´ ì´ìƒ)

íŠ¹ìˆ˜ ê·œì¹™:
- 2012DaeriCompany.union_ = 1ì¸ ê²½ìš° í• ì¸í• ì¦ ë¬´ì‹œ (rate = 1)
- 2019rate í…Œì´ë¸” ìš°ì„  ì¡°íšŒ (policy, jumin ê¸°ì¤€)
```

---

## íŒŒì¼ êµ¬ì¡°

```
cms/
â”œâ”€â”€ disk-cms/                          # Node.js í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ pages/insurance/
â”‚   â”‚   â”‚   â”œâ”€â”€ kj-driver-company.html
â”‚   â”‚   â”‚   â”œâ”€â”€ kj-driver-endorse-list.html
â”‚   â”‚   â”‚   â”œâ”€â”€ kj-driver-search.html
â”‚   â”‚   â”‚   â”œâ”€â”€ kj-driver-policy-search.html
â”‚   â”‚   â”‚   â””â”€â”€ kj-driver-code-by-policy.html
â”‚   â”‚   â””â”€â”€ js/insurance/
â”‚   â”‚       â”œâ”€â”€ kj-driver-company.js
â”‚   â”‚       â”œâ”€â”€ kj-driver-endorse-list.js
â”‚   â”‚       â”œâ”€â”€ kj-driver-search.js
â”‚   â”‚       â”œâ”€â”€ kj-driver-code-by-policy.js
â”‚   â”‚       â”œâ”€â”€ kj-company-modal.js
â”‚   â”‚       â””â”€â”€ kj-constants.js
â”‚   â””â”€â”€ routes/insurance/
â”‚       â”œâ”€â”€ kj-driver-company.js      # 20ê°œ+ API í”„ë¡ì‹œ
â”‚       â””â”€â”€ kj-driver-search.js
â”‚
â””â”€â”€ pci0327/                           # PHP ë°±ì—”ë“œ
    â””â”€â”€ api/
        â”œâ”€â”€ insurance/                 # 27ê°œ PHP API íŒŒì¼
        â”‚   â”œâ”€â”€ kj-company-*.php
        â”‚   â”œâ”€â”€ kj-certi-*.php
        â”‚   â”œâ”€â”€ kj-endorse-*.php
        â”‚   â”œâ”€â”€ kj-policy-*.php
        â”‚   â””â”€â”€ kj-premium-*.php
        â””â”€â”€ utils/
            â”œâ”€â”€ kj-endorse-utils.php   # ê³µí†µ í•¨ìˆ˜
            â”œâ”€â”€ kj-sms-utils.php       # SMS ë°œì†¡
            â””â”€â”€ kj-hyundai-api.php     # í˜„ëŒ€í•´ìƒ API
```

---

## ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡ íŠ¸ì—”ë“œ
- HTML5, CSS3, JavaScript (ES6+)
- Bootstrap 5.3.0
- Font Awesome 6.4.0
- Noto Sans KR (Google Fonts)

### ë°±ì—”ë“œ
- PHP 7.x+
- PDO (Prepared Statements)
- JSON ì‘ë‹µ (UTF-8)
- íŠ¸ëœì­ì…˜ ì§€ì›

### ë¯¸ë“¤ì›¨ì–´
- Node.js/Express
- Axios (HTTP í´ë¼ì´ì–¸íŠ¸)
- í”„ë¡ì‹œ íŒ¨í„´ (í”„ë¡ íŠ¸ì—”ë“œ â†’ Node.js â†’ PHP)

### ë°ì´í„°ë² ì´ìŠ¤
- MySQL/MariaDB
- ì£¼ìš” í…Œì´ë¸”: `2012DaeriCompany`, `2012DaeriMember`, `2012CertiTable`, `kj_insurance_premium_data` ë“±

---

## ë³´ì•ˆ

### ë°ì´í„° ì•”í˜¸í™”
- ì£¼ë¯¼ë²ˆí˜¸, ì „í™”ë²ˆí˜¸ ì•”í˜¸í™” ì§€ì› (AES-256-CBC)
- `encryptData()`, `decryptData()` í•¨ìˆ˜ ì‚¬ìš©

### SQL ì¸ì ì…˜ ë°©ì§€
- PDO Prepared Statements ì‚¬ìš©
- íŒŒë¼ë¯¸í„° ë°”ì¸ë”© í•„ìˆ˜

### ë¡œê¹…
- ëª¨ë“  API ìš”ì²­ ë¡œê¹… (`logs/` í´ë”)
- ì—ëŸ¬ ì¶”ì  ë° ë””ë²„ê¹… ì§€ì›

---

## ì°¸ê³  ë¬¸ì„œ

- `ë§ˆì´ê·¸ë ˆì´ì…˜-í…ŒìŠ¤íŠ¸-ê°€ì´ë“œ.md` - ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

---

## ğŸ“… ì‘ì—… ì´ë ¥

### 2025-12-20

#### âœ… ì™„ë£Œëœ ì‘ì—…

1. **ì¼ì¼ë°°ì„œí˜„í™© ê¸°ëŠ¥ ì¶”ê°€**
   - ë°°ì„œí˜„í™© ë²„íŠ¼ í´ë¦­ ì‹œ ìƒˆë¡œìš´ ì¼ì¼ë°°ì„œí˜„í™© ëª¨ë‹¬ í‘œì‹œ
   - ë‚ ì§œ ë²”ìœ„ ê²€ìƒ‰ ê¸°ëŠ¥ (ì‹œì‘ì¼/ì¢…ë£Œì¼)
   - ìš”ì¼ë³„ í‰ê·  ë°ì´í„° í…Œì´ë¸” (ì´ì „ ë‹¬ vs í˜„ì¬ ë‹¬ ë¹„êµ)
   - ì›”ë³„ ì´ í‰ê·  ê³„ì‚°
   - ì¼ë³„ ìƒì„¸ ë°ì´í„° í…Œì´ë¸” (ë‘ ì—´ë¡œ í‘œì‹œ)
   - **ìƒˆ API**: `kj-daily-endorse-current-situation.php`
   - **í”„ë¡ì‹œ**: `POST /api/insurance/kj-daily-endorse/current-situation`

2. **ë¬¸ìë¦¬ìŠ¤íŠ¸ ëª¨ë‹¬ ì™„ì„±**
   - ê²€ìƒ‰ ë°©ì‹ ì„ íƒ (ë‚ ì§œ ë²”ìœ„/ì „í™”ë²ˆí˜¸/ëŒ€ë¦¬ìš´ì „íšŒì‚¬)
   - ë‚ ì§œ ë²”ìœ„ ê²€ìƒ‰ (ê¸°ë³¸ê°’: í•œ ë‹¬ ì „ ~ ì˜¤ëŠ˜)
   - ì „í™”ë²ˆí˜¸ ê²€ìƒ‰ ì‹œ í•˜ì´í‘¼ ìë™ ì¶”ê°€ ê¸°ëŠ¥
   - SMS ë©”ì‹œì§€ ëª©ë¡ í…Œì´ë¸” í‘œì‹œ
   - í˜ì´ì§€ë„¤ì´ì…˜ (í˜ì´ì§€ë‹¹ 15ê°œ)
   - ëª¨ë‹¬ ì—´ ë•Œ ìë™ ì¡°íšŒ ê¸°ëŠ¥
   - í•„í„° ë ˆì´ë¸” ì œê±° ë° í’‹í„° ì œê±°
   - **ìƒˆ API**: `kj-sms-list.php`
   - **í”„ë¡ì‹œ**: `POST /api/insurance/kj-sms/list`

3. **ì¼ì¼ë°°ì„œë¦¬ìŠ¤íŠ¸ ëª¨ë‹¬ ê°œì„ **
   - ëª¨ë‹¬ ì—´ ë•Œ í•„í„° ì´ˆê¸°í™” (ë‚ ì§œ: ì˜¤ëŠ˜, ëŒ€ë¦¬ìš´ì „íšŒì‚¬: ë¹ˆ ê°’, ì¦ê¶Œë²ˆí˜¸: ë¹ˆ ê°’)
   - ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ëª©ë¡ì—ì„œ ì¼€ì´ë“œë¼ì´ë¸Œ(dNum: "653") í•­ìƒ ìµœìƒë‹¨ í‘œì‹œ
   - ê²€í†  ë²„íŠ¼ ëª¨ë‹¬ê³¼ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘ (ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€)

4. **ë°°ì„œí˜„í™© ëª¨ë‹¬ ê°œì„ **
   - ì¼ì¼ë°°ì„œë¦¬ìŠ¤íŠ¸ ëª¨ë‹¬ê³¼ side-by-side í‘œì‹œ ê¸°ëŠ¥
   - ë‘ ëª¨ë‹¬ ë™ì‹œ í‘œì‹œ ì‹œ ì„œë¡œ ë‹«íˆì§€ ì•Šë„ë¡ ê°œì„ 
   - z-index ì¡°ì •ìœ¼ë¡œ í´ë¦­ ê°€ëŠ¥ì„± ë³´ì¥
   - ë³µì‚¬ ë²„íŠ¼ ìƒë‹¨ ë°°ì¹˜

#### ğŸ“ ìƒì„±/ìˆ˜ì •ëœ íŒŒì¼

**ìƒˆë¡œ ìƒì„±ëœ íŒŒì¼**:
- `pci0327/api/insurance/kj-daily-endorse-current-situation.php` - ì¼ì¼ë°°ì„œí˜„í™© ì¡°íšŒ API
- `pci0327/api/insurance/kj-sms-list.php` - ë¬¸ìë¦¬ìŠ¤íŠ¸ ì¡°íšŒ API

**ìˆ˜ì •ëœ íŒŒì¼**:
- `disk-cms/public/pages/insurance/kj-driver-endorse-list.html` - ì¼ì¼ë°°ì„œí˜„í™© ëª¨ë‹¬, ë¬¸ìë¦¬ìŠ¤íŠ¸ ëª¨ë‹¬ UI ê°œì„ 
- `disk-cms/public/js/insurance/kj-driver-endorse-list.js` - ì¼ì¼ë°°ì„œí˜„í™©, ë¬¸ìë¦¬ìŠ¤íŠ¸ ê¸°ëŠ¥ êµ¬í˜„
- `disk-cms/routes/insurance/kj-driver-company.js` - ì¼ì¼ë°°ì„œí˜„í™©, ë¬¸ìë¦¬ìŠ¤íŠ¸ API í”„ë¡ì‹œ ì¶”ê°€

#### ğŸ”§ ê¸°ìˆ  ì„¸ë¶€ì‚¬í•­

**ì¼ì¼ë°°ì„œí˜„í™© ë°ì´í„° ì²˜ë¦¬**:
- ë‚ ì§œ ë²”ìœ„ë³„ ë°°ì„œ ë°ì´í„° ì§‘ê³„
- ì´ì „ ë‹¬ê³¼ í˜„ì¬ ë‹¬ ë°ì´í„° ë¶„ë¦¬
- ìš”ì¼ë³„ í‰ê·  ê³„ì‚° (ì›”~ì¼)
- ì›”ë³„ ì´ í‰ê·  ê³„ì‚°
- ì¼ë³„ ìƒì„¸ ë°ì´í„° í‘œì‹œ

**ë¬¸ìë¦¬ìŠ¤íŠ¸ ê²€ìƒ‰ ê¸°ëŠ¥**:
- ë‚ ì§œ ë²”ìœ„ ê²€ìƒ‰: `LastTime` í•„ë“œ ê¸°ì¤€
- ì „í™”ë²ˆí˜¸ ê²€ìƒ‰: `Rphone1`, `Rphone2`, `Rphone3` í•„ë“œë¡œ ê²€ìƒ‰
- ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ê²€ìƒ‰: íšŒì‚¬ëª… LIKE ê²€ìƒ‰
- í˜ì´ì§€ë‹¹ 15ê°œ í•­ëª© í‘œì‹œ

**ëª¨ë‹¬ ìƒí˜¸ì‘ìš© ê°œì„ **:
- `backdrop: false` ë˜ëŠ” `backdrop: 'static'` ì„¤ì •
- ì»¤ìŠ¤í…€ backdrop ê´€ë¦¬
- z-index ì¡°ì • (ì¼ì¼ë°°ì„œë¦¬ìŠ¤íŠ¸: 1055, ë°°ì„œí˜„í™©: 1057)
- `hide.bs.modal` ì´ë²¤íŠ¸ ì°¨ë‹¨ ë¡œì§

---

---

### 2025-12-20 (ì¶”ê°€ ì‘ì—…)

#### âœ… ì™„ë£Œëœ ì‘ì—…

1. **ì—…ì²´ I.D ê´€ë¦¬ ê¸°ëŠ¥ ì¶”ê°€**
   - ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ì •ë³´ ëª¨ë‹¬ì—ì„œ "ì½ê¸° ì „ìš© ID" â†’ "ì—…ì²´ I.D"ë¡œ ë³€ê²½
   - ì—…ì²´ I.D ë§í¬ í´ë¦­ ì‹œ ì—…ì²´ ID ê´€ë¦¬ ëª¨ë‹¬ í‘œì‹œ
   - ì—…ì²´ ID ëª©ë¡ ì¡°íšŒ ê¸°ëŠ¥
   - ì‹ ê·œ ì•„ì´ë”” ìƒì„± ê¸°ëŠ¥
   - ID ì¤‘ë³µ ê²€ì‚¬ ê¸°ëŠ¥
   - ë‹´ë‹¹ìëª…, ì „í™”ë²ˆí˜¸, ë¹„ë°€ë²ˆí˜¸, ê¶Œí•œ, í—ˆìš©/ì°¨ë‹¨ ìƒíƒœ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥

2. **PHP API íŒŒì¼ ìƒì„± (8ê°œ)**
   - `kj-company-id-list.php` - ì—…ì²´ I.D ëª©ë¡ ì¡°íšŒ
   - `kj-company-id-save.php` - ì‹ ê·œ ì•„ì´ë”” ì €ì¥
   - `kj-company-check-id.php` - ID ì¤‘ë³µ ê²€ì‚¬
   - `kj-company-id-update-user.php` - ë‹´ë‹¹ìëª… ì—…ë°ì´íŠ¸
   - `kj-company-id-update-phone.php` - ì „í™”ë²ˆí˜¸ ì—…ë°ì´íŠ¸
   - `kj-company-id-update-password.php` - ë¹„ë°€ë²ˆí˜¸ ì—…ë°ì´íŠ¸
   - `kj-company-id-update-readis.php` - ì½ê¸° ê¶Œí•œ ì—…ë°ì´íŠ¸ (1: ì½ê¸°ì „ìš©, 2: ëª¨ë“ ê¶Œí•œ)
   - `kj-company-id-update-permit.php` - í—ˆìš©/ì°¨ë‹¨ ì—…ë°ì´íŠ¸ (1: í—ˆìš©, 2: ì°¨ë‹¨)

3. **Node.js í”„ë¡ì‹œ ë¼ìš°íŠ¸ ì¶”ê°€ (8ê°œ)**
   - `POST /api/insurance/kj-company/id-list`
   - `POST /api/insurance/kj-company/check-id`
   - `POST /api/insurance/kj-company/id-save`
   - `POST /api/insurance/kj-company/id-update-user`
   - `POST /api/insurance/kj-company/id-update-phone`
   - `POST /api/insurance/kj-company/id-update-password`
   - `POST /api/insurance/kj-company/id-update-readis`
   - `POST /api/insurance/kj-company/id-update-permit`

4. **í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„**
   - ì—…ì²´ ID ê´€ë¦¬ ëª¨ë‹¬ UI êµ¬í˜„ (`kj-id-modal`)
   - `handleIdClick()` í•¨ìˆ˜ êµ¬í˜„ - ì—…ì²´ ID ëª¨ë‹¬ ì—´ê¸°
   - ID/ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ í•¨ìˆ˜ êµ¬í˜„
   - ì „í™”ë²ˆí˜¸ í¬ë§·íŒ… í•¨ìˆ˜ êµ¬í˜„
   - ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤ êµ¬í˜„ (ë‹´ë‹¹ìëª…, ì „í™”ë²ˆí˜¸, ë¹„ë°€ë²ˆí˜¸, ê¶Œí•œ, í—ˆìš©/ì°¨ë‹¨)

#### ğŸ“ ìƒì„±/ìˆ˜ì •ëœ íŒŒì¼

**ìƒˆë¡œ ìƒì„±ëœ íŒŒì¼**:
- `pci0327/api/insurance/kj-company-id-list.php`
- `pci0327/api/insurance/kj-company-id-save.php`
- `pci0327/api/insurance/kj-company-check-id.php`
- `pci0327/api/insurance/kj-company-id-update-user.php`
- `pci0327/api/insurance/kj-company-id-update-phone.php`
- `pci0327/api/insurance/kj-company-id-update-password.php`
- `pci0327/api/insurance/kj-company-id-update-readis.php`
- `pci0327/api/insurance/kj-company-id-update-permit.php`

**ìˆ˜ì •ëœ íŒŒì¼**:
- `disk-cms/public/pages/insurance/kj-driver-company.html` - ì—…ì²´ ID ê´€ë¦¬ ëª¨ë‹¬ ì¶”ê°€
- `disk-cms/public/js/insurance/kj-company-modal.js` - ì—…ì²´ ID ê´€ë¦¬ ê¸°ëŠ¥ êµ¬í˜„
- `disk-cms/routes/insurance/kj-driver-company.js` - ì—…ì²´ ID ê´€ë ¨ API í”„ë¡ì‹œ ì¶”ê°€

#### ğŸ”§ ê¸°ìˆ  ì„¸ë¶€ì‚¬í•­

**ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”**:
- `2012Costomer`: ì—…ì²´ ID ê´€ë¦¬ í…Œì´ë¸”
  - `num`: ê³ ìœ  ë²ˆí˜¸ (PK)
  - `2012DaeriCompanyNum`: ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ë²ˆí˜¸ (FK)
  - `mem_id`: ì•„ì´ë””
  - `passwd`: ë¹„ë°€ë²ˆí˜¸ (MD5 ì•”í˜¸í™”)
  - `user`: ë‹´ë‹¹ìëª…
  - `hphone`: ì „í™”ë²ˆí˜¸
  - `readIs`: ì½ê¸° ê¶Œí•œ (1: ì½ê¸°ì „ìš©, 2: ëª¨ë“ ê¶Œí•œ)
  - `permit`: í—ˆìš©/ì°¨ë‹¨ (1: í—ˆìš©, 2: ì°¨ë‹¨)

**API ìš”ì²­/ì‘ë‹µ í˜•ì‹**:
```json
// ì—…ì²´ ID ëª©ë¡ ì¡°íšŒ ì‘ë‹µ
{
  "success": true,
  "dNum": "653",
  "data": [
    {
      "company": "ì¼€ì´ë“œë¼ì´ë¸Œ",
      "num": 443,
      "mem_id": "kdrive",
      "hphone": "010-4356-0718",
      "permit": "1",
      "readIs": "2",
      "user": "ë‹´ë‹¹ìëª…"
    }
  ]
}

// ID ì¤‘ë³µ ê²€ì‚¬ ì‘ë‹µ
{
  "available": true  // true: ì‚¬ìš© ê°€ëŠ¥, false: ì‚¬ìš© ë¶ˆê°€
}
```

**ì£¼ìš” ê¸°ëŠ¥**:
- ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒ, ì˜ë¬¸ê³¼ ìˆ«ì í¬í•¨í•´ì•¼ í•¨
- IDëŠ” 20ì ì´í•˜ë¡œ ì œí•œ
- ì „í™”ë²ˆí˜¸ëŠ” í•˜ì´í”ˆ ìë™ ì¶”ê°€ (010-XXXX-XXXX í˜•ì‹)
- ì‹¤ì‹œê°„ ID ì¤‘ë³µ ê²€ì‚¬
- ì—”í„°í‚¤ë¡œ ë¹ ë¥¸ ì—…ë°ì´íŠ¸ ì§€ì›

---

### 2025-12-20 (ì‹ ê·œ ë“±ë¡ ë° ìˆ˜ì • ê¸°ëŠ¥ ì¶”ê°€)

#### âœ… ì™„ë£Œëœ ì‘ì—…

1. **ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ì‹ ê·œ ë“±ë¡ ê¸°ëŠ¥ êµ¬í˜„**
   - ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ëª©ë¡ í˜ì´ì§€ì— "ì‹ ê·œ ë“±ë¡" ë²„íŠ¼ ì¶”ê°€
   - ì‹ ê·œ ë“±ë¡ ëª¨ë‹¬ êµ¬í˜„ (ê¸°ë³¸ ì •ë³´ë§Œ ì…ë ¥)
   - ì£¼ë¯¼ë²ˆí˜¸ ì…ë ¥ í›„ ì—”í„°í‚¤ë¡œ ê¸°ì¡´ íšŒì‚¬ ì¡°íšŒ ê¸°ëŠ¥
   - ì£¼ë¯¼ë²ˆí˜¸ ê²€ì¦: 13ìë¦¬ ìˆ«ìë§Œ í™•ì¸ (ì²´í¬ì„¬ ê²€ì¦ ì œê±°)
   - ê¸°ì¡´ íšŒì‚¬ ì¡´ì¬ ì‹œ í•´ë‹¹ íšŒì‚¬ ì •ë³´ ìë™ ë¡œë“œ
   - ì‹ ê·œ ë“±ë¡ ê°€ëŠ¥ ì‹œ íšŒì‚¬ ì •ë³´ ì €ì¥
   - ì €ì¥ í›„ í•´ë‹¹ íšŒì‚¬ ì •ë³´ ëª¨ë‹¬ ìë™ ì—´ë¦¼ (ì¦ê¶Œ ì •ë³´ ì…ë ¥ ê°€ëŠ¥)
   - ì‹ ê·œ ë“±ë¡ ëª¨ë‹¬ì—ì„œ ë‹«ê¸° ë²„íŠ¼ ì œê±° (ì €ì¥ë§Œ ê°€ëŠ¥)

2. **ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ì •ë³´ ìˆ˜ì • ê¸°ëŠ¥ êµ¬í˜„**
   - ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ì •ë³´ ëª¨ë‹¬ì— "ìˆ˜ì •" ë²„íŠ¼ ì¶”ê°€
   - ìˆ˜ì • ëª¨ë“œ ì „í™˜ ê¸°ëŠ¥ (ì½ê¸° ì „ìš© â†’ ì…ë ¥ í•„ë“œ)
   - ìˆ˜ì • ê°€ëŠ¥í•œ í•„ë“œ:
     - ì£¼ë¯¼ë²ˆí˜¸
     - ëŒ€ë¦¬ìš´ì „íšŒì‚¬ëª…
     - ì„±ëª…(ëŒ€í‘œì)
     - í•¸ë“œí°ë²ˆí˜¸
     - ì „í™”ë²ˆí˜¸
     - ì‚¬ì—…ìë²ˆí˜¸
     - ë²•ì¸ë²ˆí˜¸
     - ì£¼ì†Œ (ìš°í¸ë²ˆí˜¸, ê¸°ë³¸ì£¼ì†Œ, ìƒì„¸ì£¼ì†Œ)
     - ë³´í—˜ë£Œ ë°›ëŠ”ë‚ 
   - ì €ì¥/ì·¨ì†Œ ë²„íŠ¼ ê¸°ëŠ¥
   - ì €ì¥ í›„ ëª¨ë‹¬ ìë™ ìƒˆë¡œê³ ì¹¨

3. **ì…ë ¥ í•„ë“œ í¬ë§·íŒ… ê¸°ëŠ¥**
   - ì£¼ë¯¼ë²ˆí˜¸: í•˜ì´í”ˆ ìë™ ì¶”ê°€ (660327-1069017)
   - í•¸ë“œí°ë²ˆí˜¸: í•˜ì´í”ˆ ìë™ ì¶”ê°€ (010-1234-5678)
   - ì¼ë°˜ì „í™”: í•˜ì´í”ˆ ìë™ ì¶”ê°€ (02-1234-5678)
   - ì‚¬ì—…ìë²ˆí˜¸: í•˜ì´í”ˆ ìë™ ì¶”ê°€ (123-45-67890)
   - ë²•ì¸ë²ˆí˜¸: í•˜ì´í”ˆ ìë™ ì¶”ê°€ (123456-1234567)
   - ì£¼ë¯¼ë²ˆí˜¸ëŠ” í•˜ì´í”ˆ í¬í•¨í•˜ì—¬ ì €ì¥

4. **UI ê°œì„ **
   - ìˆ˜ì • ëª¨ë“œ ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼:
     - í…Œë‘ë¦¬ ì—†ìŒ (`border: none`)
     - í°ìƒ‰ ë°°ê²½ (`background-color: white`)
     - td ìš”ì†Œ padding 0
     - ì…ë ¥ í•„ë“œ ë‚´ë¶€ padding 0.25rem (ê°€ë…ì„± ìœ ì§€)
   - ë³´í—˜ë£Œ ë°›ëŠ”ë‚  í•„ë“œë„ ë™ì¼í•œ ìŠ¤íƒ€ì¼ ì ìš©

#### ğŸ“ ìƒì„±/ìˆ˜ì •ëœ íŒŒì¼

**ìƒˆë¡œ ìƒì„±ëœ íŒŒì¼**:
- `pci0327/api/insurance/kj-company-check-jumin.php` - ì£¼ë¯¼ë²ˆí˜¸ë¡œ ê¸°ì¡´ íšŒì‚¬ ì¡°íšŒ API
- `pci0327/api/insurance/kj-company-store.php` - ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ì‹ ê·œ ë“±ë¡/ìˆ˜ì • API

**ìˆ˜ì •ëœ íŒŒì¼**:
- `disk-cms/public/pages/insurance/kj-driver-company.html` - ì‹ ê·œ ë“±ë¡ ë²„íŠ¼ ì¶”ê°€
- `disk-cms/public/js/insurance/kj-driver-company.js` - ì‹ ê·œ ë“±ë¡ ë²„íŠ¼ ì´ë²¤íŠ¸ ì¶”ê°€
- `disk-cms/public/js/insurance/kj-company-modal.js` - ì‹ ê·œ ë“±ë¡ ëª¨ë‹¬, ìˆ˜ì • ê¸°ëŠ¥, ì…ë ¥ í•„ë“œ í¬ë§·íŒ… êµ¬í˜„
- `disk-cms/routes/insurance/kj-driver-company.js` - ì‹ ê·œ ë“±ë¡/ìˆ˜ì • API í”„ë¡ì‹œ ì¶”ê°€

#### ğŸ”§ ê¸°ìˆ  ì„¸ë¶€ì‚¬í•­

**ì‹ ê·œ ë“±ë¡ í”Œë¡œìš°**:
```
1. "ì‹ ê·œ ë“±ë¡" ë²„íŠ¼ í´ë¦­
2. ì‹ ê·œ ë“±ë¡ ëª¨ë‹¬ ì—´ë¦¼ (ê¸°ë³¸ ì •ë³´ ì…ë ¥ í¼)
3. ì£¼ë¯¼ë²ˆí˜¸ ì…ë ¥ í›„ ì—”í„°í‚¤
4. ì„œë²„ì—ì„œ ì£¼ë¯¼ë²ˆí˜¸ë¡œ ê¸°ì¡´ íšŒì‚¬ ì¡°íšŒ
   - ê¸°ì¡´ íšŒì‚¬ ì¡´ì¬: í•´ë‹¹ íšŒì‚¬ ì •ë³´ ëª¨ë‹¬ ìë™ ì—´ë¦¼
   - ì‹ ê·œ ë“±ë¡ ê°€ëŠ¥: íšŒì‚¬ ì •ë³´ ì…ë ¥ í›„ ì €ì¥
5. ì €ì¥ ì„±ê³µ ì‹œ í•´ë‹¹ íšŒì‚¬ ì •ë³´ ëª¨ë‹¬ ìë™ ì—´ë¦¼ (ì¦ê¶Œ ì •ë³´ ì…ë ¥ ê°€ëŠ¥)
```

**ìˆ˜ì • ëª¨ë“œ í”Œë¡œìš°**:
```
1. ëŒ€ë¦¬ìš´ì „íšŒì‚¬ í´ë¦­ â†’ íšŒì‚¬ ì •ë³´ ëª¨ë‹¬ ì—´ë¦¼
2. "ìˆ˜ì •" ë²„íŠ¼ í´ë¦­ â†’ ìˆ˜ì • ëª¨ë“œë¡œ ì „í™˜
3. ì…ë ¥ í•„ë“œì—ì„œ ì •ë³´ ìˆ˜ì •
4. "ì €ì¥" ë²„íŠ¼ í´ë¦­ â†’ ì„œë²„ì— ìˆ˜ì •ëœ ì •ë³´ ì „ì†¡
5. ì €ì¥ ì„±ê³µ ì‹œ ëª¨ë‹¬ ìë™ ìƒˆë¡œê³ ì¹¨ (ë³€ê²½ì‚¬í•­ ë°˜ì˜)
```

**ì£¼ë¯¼ë²ˆí˜¸ ê²€ì¦ ê·œì¹™**:
- í˜•ì‹: 13ìë¦¬ ìˆ«ì (í•˜ì´í”ˆ í¬í•¨: 660327-1069017)
- ì²´í¬ì„¬ ê²€ì¦ ì œê±° (ì—„ê²©í•œ ê²€ì¦ ë¶ˆí•„ìš”)
- í•˜ì´í”ˆ í¬í•¨í•˜ì—¬ ì €ì¥

**API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€**:
- `GET /api/insurance/kj-company/check-jumin?jumin=ì£¼ë¯¼ë²ˆí˜¸` - ì£¼ë¯¼ë²ˆí˜¸ë¡œ ê¸°ì¡´ íšŒì‚¬ ì¡°íšŒ
- `POST /api/insurance/kj-company/store` - ëŒ€ë¦¬ìš´ì „íšŒì‚¬ ì‹ ê·œ ë“±ë¡/ìˆ˜ì •
  - ì‹ ê·œ ë“±ë¡: `dNum` ì—†ì´ ì „ì†¡
  - ìˆ˜ì •: `dNum` í¬í•¨í•˜ì—¬ ì „ì†¡

**ë°ì´í„°ë² ì´ìŠ¤ í•„ë“œ**:
- `2012DaeriCompany` í…Œì´ë¸”ì— ì£¼ì†Œ í•„ë“œ ì¶”ê°€ ì§€ì›:
  - `postNum`: ìš°í¸ë²ˆí˜¸
  - `address1`: ê¸°ë³¸ì£¼ì†Œ
  - `address2`: ìƒì„¸ì£¼ì†Œ

**ì£¼ìš” í•¨ìˆ˜**:
- `renderNewCompanyModal()`: ì‹ ê·œ ë“±ë¡ ëª¨ë‹¬ ë Œë”ë§
- `setupNewCompanyModalEvents()`: ì‹ ê·œ ë“±ë¡ ëª¨ë‹¬ ì´ë²¤íŠ¸ ì„¤ì •
- `saveNewCompany()`: ì‹ ê·œ íšŒì‚¬ ì €ì¥ í•¨ìˆ˜
- `enterEditMode()`: ìˆ˜ì • ëª¨ë“œë¡œ ì „í™˜
- `saveCompanyInfo()`: íšŒì‚¬ ì •ë³´ ì €ì¥ í•¨ìˆ˜
- `setupEditModeFormatting()`: ìˆ˜ì • ëª¨ë“œ ì…ë ¥ í•„ë“œ í¬ë§·íŒ… ì„¤ì •

---

**ë¬¸ì„œ ë²„ì „**: 1.3  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-20

