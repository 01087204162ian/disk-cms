# λ³΄ν—λ£ μ…λ ¥ νμ΄μ§€ κ³ λ„ν™” κΈ°νμ•

## π“‹ ν”„λ΅μ νΈ κ°μ”

### λ©μ 
κµ¬λ²„μ „ PHP XML κΈ°λ° λ³΄ν—λ£ μ…λ ¥ νμ΄μ§€λ¥Ό ν„λ€μ μΈ JSON κΈ°λ° CMS μ‹μ¤ν…μΌλ΅ κ³ λ„ν™”

### ν„μ¬ μƒν™©
- **κµ¬λ²„μ „**: XML μ‘λ‹µ (EUC-KR), λ‹΄λ‹Ήμλ³„ μ—°λ Ή κµ¬κ°„λ³„ λ³΄ν—λ£ κ³„μ‚°
- **μ‹ λ²„μ „**: JSON μ‘λ‹µ (UTF-8), `kj-policy-stats.php` κΈ°λ° ν†µκ³„ API μ΅΄μ¬
- **μ°¨μ΄μ **: κµ¬λ²„μ „μ€ λ‹΄λ‹Ήμλ³„λ΅ λ°μ΄ν„°λ¥Ό λ¶„λ¦¬ν•μ—¬ ν‘μ‹, μ‹ λ²„μ „μ€ μ „μ²΄ ν†µκ³„λ§ μ κ³µ

---

## π― ν•µμ‹¬ μ”κµ¬μ‚¬ν•­

### 1. κΈ°λ¥ μ”κµ¬μ‚¬ν•­

#### 1.1 μ¦κ¶ μƒμ„Έ μ •λ³΄ ν‘μ‹
- μ¦κ¶λ²νΈ, νμ‚¬λ…, κ³„μ•½μ, μ£Όλ―Όλ²νΈ, κ³„μ•½μΌ, νμ°¨, μΈμ›, λ‹¨μ²΄, ν• μΈμ¨
- **λ°μ΄ν„° μ†μ¤**: `kj-certi-detail.php` API ν™μ©
- **ν‘μ‹ μ„μΉ**: λ¨λ‹¬ μƒλ‹¨ λλ” νμ΄μ§€ μƒλ‹¨

#### 1.2 λ‹΄λ‹Ήμλ³„ μ—°λ Ή κµ¬κ°„λ³„ λ³΄ν—λ£ ν…μ΄λΈ”
- **λ‹΄λ‹Ήμ κµ¬λ¶„**: 2012Member ν…μ΄λΈ” (num: 1~4)
- **μ—°λ Ή κµ¬κ°„**: `kj_insurance_premium_data` ν…μ΄λΈ”μ `policyNum`μΌλ΅ μ΅°νν•μ—¬ κ²°μ •
  - `kj_insurance_premium_data` ν…μ΄λΈ”μ—μ„ `policyNum = μ¦κ¶λ²νΈ`λ΅ μ΅°ν
  - `start_month`, `end_month` ν•„λ“λ΅ μ—°λ Ή κµ¬κ°„ κ²°μ •
  - λ³΄ν—μ‚¬λ³„/κ³„μ•½μΌλ³„ ν•λ“μ½”λ”© μ κ±°, λ°μ΄ν„°λ² μ΄μ¤ κΈ°λ°μΌλ΅ λ™μ  μ²λ¦¬
- **λ‹΄λ‹Ήμ ν•„ν„°λ§**: λ€λ¦¬κΈ°μ‚¬ μΈμ›μ΄ 0μΈ λ‹΄λ‹Ήμλ” ν‘μ‹ν•μ§€ μ•μ

#### 1.3 λ³΄ν—λ£ κ³„μ‚° ν•­λ©
κ° μ—°λ Ή κµ¬κ°„λ³„λ΅ λ‹¤μ ν•­λ© κ³„μ‚°:
1. **μΈμ› (driver_count)**: ν•΄λ‹Ή μ—°λ Ή κµ¬κ°„μ λ€λ¦¬κΈ°μ‚¬ μ
2. **1/10 λ³΄ν—λ£ (payment10_premium1)**: `kj_insurance_premium_data.payment10_premium1` (10ν λ¶„λ‚© μ¤‘ 1ν λ³΄ν—λ£)
3. **νμ‚¬λ³΄ν—λ£ (company_premium)**: λ³΄ν—νμ‚¬ λ‚©μ… λ³΄ν—λ£ μ΄ν•© (ν• μΈν• μ¦ μ μ© ν›„)
   - κ° λ€λ¦¬κΈ°μ‚¬λ³„λ΅ `(1/10λ³΄ν—λ£ Γ— ν• μΈν• μ¦)` κ³„μ‚° ν›„ ν•©μ‚°
   - κ³„μ‚°μ‹: `Ξ£(1/10λ³΄ν—λ£ Γ— ν• μΈν• μ¦λ¥ )` (κ° λ€λ¦¬κΈ°μ‚¬λ³„)
4. **ν™μ‚°λ³΄ν—λ£ (converted_premium)**: νμ‚¬λ³΄ν—λ£λ¥Ό μ›” λ‹¨μ„λ΅ ν™μ‚° (`νμ‚¬λ³΄ν—λ£ Γ— 10/12`)
5. **μ›”λ³΄ν—λ£ (monthly_premium)**: μ‹¤μ  μ›” λ‚©μ… λ³΄ν—λ£ (ν• μΈν• μ¦ μ μ© ν›„)
   - κ° λ€λ¦¬κΈ°μ‚¬λ³„λ΅ `kj_premium_data.monthly_premium_total Γ— ν• μΈν• μ¦` κ³„μ‚° ν›„ ν•©μ‚°
   - `2012DaeriMember.CertiTableNum = kj_premium_data.cNum` μ΅°κ±΄μΌλ΅ μ΅°ν

#### 1.4 ν• μΈν• μ¦ μ μ©
- **λ°μ΄ν„° μ†μ¤**: `2019rate` ν…μ΄λΈ” (jumin, policy κΈ°μ¤€)
- **ν• μΈν• μ¦ μ½”λ“**: 1~14 (calculatePersonalRate ν•¨μ μ‚¬μ©)
- **νΉμ μ²λ¦¬**: `2012DaeriCompany.union_ = 1`μΈ κ²½μ° ν• μΈν• μ¦ λ¬΄μ‹ (rate = 1)

#### 1.5 λ‹΄λ‹Ήμλ³„ μ†κ³„ λ° μ „μ²΄ ν•©κ³„
- κ° λ‹΄λ‹Ήμλ³„λ΅ μ†κ³„ κ³„μ‚°
- μ „μ²΄ ν•©κ³„ κ³„μ‚°

---

## π—οΈ μ‹μ¤ν… μ•„ν‚¤ν…μ²

### 2.1 λ°±μ—”λ“ API μ„¤κ³„

#### 2.1.1 κΈ°μ΅΄ API ν™•μ¥: `kj-policy-stats.php`
**κ²½λ΅**: `/pci0327/api/insurance/kj-policy-stats.php`  
**λ©”μ„λ“**: GET  
**νλΌλ―Έν„°**: 
- `certi` (μ¦κ¶λ²νΈ, ν•„μ)
- `by_manager` (λ‹΄λ‹Ήμλ³„ μ΅°ν μ—¬λ¶€, μ„ νƒ, κΈ°λ³Έκ°’: 0)
  - `by_manager=1`: λ‹΄λ‹Ήμλ³„ λ°μ΄ν„° ν¬ν•¨
  - `by_manager=0` λλ” μƒλµ: κΈ°μ΅΄ λ°©μ‹ (μ „μ²΄ ν†µκ³„λ§)

**μ‘λ‹µ κµ¬μ΅°** (`by_manager=0` λλ” μƒλµ μ‹ - κΈ°μ΅΄ λ°©μ‹):
```json
{
  "success": true,
  "certi": "2025-N654290",
  "member_count": 118,
  "age_ranges": [
    {
      "age_range": "19~28μ„Έ",
      "start_month": 19,
      "end_month": 28,
      "driver_count": 0,
      "payment10_premium1": 65906,
      "company_premium": 659060,
      "converted_premium": 549217,
      "monthly_premium": 0
    }
  ],
  "summary": {
    "total_drivers": 93,
    "total_payment10_premium1": 9911218,
    "total_company_premium": 99112180,
    "total_converted_premium": 82593491,
    "total_monthly_premium": 7895160
  }
}
```

**μ‘λ‹µ κµ¬μ΅°** (`by_manager=1` μ‹ - λ‹΄λ‹Ήμλ³„ ν¬ν•¨):
```json
{
  "success": true,
  "certi": "2025-N654290",
  "certi_info": {
    "company": "λ§λ„λ΅μ¤",
    "name": "μ¤μ„±μ¤€",
    "jumin": "660327-1069017",
    "sigi": "2025-11-01",
    "nab": 2,
    "inwon": 118,
    "insurance": 3
  },
  "age_ranges": [
    // ... κΈ°μ΅΄ μ „μ²΄ ν†µκ³„ λ°μ΄ν„°
  ],
  "summary": {
    // ... κΈ°μ΅΄ μ „μ²΄ ν•©κ³„
  },
  "managers": [
    {
      "manager_num": 1,
      "manager_name": "μ¤μ„±μ¤€",
      "age_ranges": [
        {
          "age_range": "19~28μ„Έ",
          "start_month": 19,
          "end_month": 28,
          "driver_count": 0,
          "payment10_premium1": 65906,
          "company_premium": 659060,
          "converted_premium": 549217,
          "monthly_premium": 0
        }
      ],
      "subtotal": {
        "total_drivers": 93,
        "total_payment10_premium1": 9911218,
        "total_company_premium": 99112180,
        "total_converted_premium": 82593491,
        "total_monthly_premium": 7895160
      }
    }
  ],
  "grand_total": {
    "total_drivers": 93,
    "total_payment10_premium1": 9911218,
    "total_company_premium": 99112180,
    "total_converted_premium": 82593491,
    "total_monthly_premium": 7895160
  }
}
```

**μ£Όμ” λ΅μ§**:
1. `2012Certi` ν…μ΄λΈ”μ—μ„ μ¦κ¶ μ •λ³΄ μ΅°ν
2. `kj_insurance_premium_data` ν…μ΄λΈ”μ—μ„ `policyNum = μ¦κ¶λ²νΈ`λ΅ μ—°λ Ή κµ¬κ°„ μ΅°ν
   - `start_month`, `end_month`λ΅ μ—°λ Ή κµ¬κ°„ κ²°μ •
   - κ° κµ¬κ°„λ³„ `payment10_premium1` μ΅°ν
3. κ° λ‹΄λ‹Ήμ(1~4)λ³„λ΅:
   - μ—°λ Ή κµ¬κ°„λ³„ λ€λ¦¬κΈ°μ‚¬ μ΅°ν (`2012DaeriMember` + `2012DaeriCompany` μ΅°μΈ)
   - κ° λ€λ¦¬κΈ°μ‚¬λ³„ ν• μΈν• μ¦λ¥  μ μ© (`2019rate` ν…μ΄λΈ” λλ” `2012DaeriMember.rate`)
   - νμ‚¬λ³΄ν—λ£ κ³„μ‚°: `Ξ£(1/10λ³΄ν—λ£ Γ— ν• μΈν• μ¦λ¥ )` (κ° λ€λ¦¬κΈ°μ‚¬λ³„)
   - μ›”λ³΄ν—λ£ κ³„μ‚°: `Ξ£(kj_premium_data.monthly_premium_total Γ— ν• μΈν• μ¦λ¥ )` (κ° λ€λ¦¬κΈ°μ‚¬λ³„)
   - μ†κ³„ κ³„μ‚°
4. λ€λ¦¬κΈ°μ‚¬ μΈμ›μ΄ 0μΈ λ‹΄λ‹Ήμλ” μ μ™Έ
5. μ „μ²΄ ν•©κ³„ κ³„μ‚°

#### 2.1.2 Node.js ν”„λ΅μ‹ λΌμ°νΈ (κΈ°μ΅΄ λΌμ°νΈ ν™μ©)
**νμΌ**: `disk-cms/routes/insurance/kj-driver-company.js`  
**κΈ°μ΅΄ λΌμ°νΈ**: `GET /api/insurance/kj-code/policy-num-stats?certi=μ¦κ¶λ²νΈ&by_manager=1`
- κΈ°μ΅΄ λΌμ°νΈμ— `by_manager` νλΌλ―Έν„° μ¶”κ°€ μ§€μ›

---

### 2.2 ν”„λ΅ νΈμ—”λ“ μ„¤κ³„

#### 2.2.1 νμ΄μ§€ κµ¬μ΅°
**νμΌ**: `disk-cms/public/pages/insurance/kj-premium-by-manager.html` (λλ” κΈ°μ΅΄ λ¨λ‹¬ ν™•μ¥)

**λ μ΄μ•„μ›ƒ**:
```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ μ¦κ¶ μƒμ„Έ μ •λ³΄ (μΉ΄λ“)                    β”‚
β”‚ - μ¦κ¶λ²νΈ, νμ‚¬λ…, κ³„μ•½μ, κ³„μ•½μΌ λ“±    β”‚
β”‚ - [μμ •] λ²„νΌ                            β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ λ‹΄λ‹Ήμλ³„ λ³΄ν—λ£ ν…μ΄λΈ”                    β”‚
β”‚ β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚ β”‚ λ‹΄λ‹Ήμ: μ¤μ„±μ¤€                       β”‚ β”‚
β”‚ β”‚ β”β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”   β”‚ β”‚
β”‚ β”‚ β”‚μ—°λ Ή β”‚μΈμ› β”‚1/10 β”‚νμ‚¬ β”‚ν™μ‚° β”‚μ›” β”‚ β”‚
β”‚ β”‚ β”β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”¤   β”‚ β”‚
β”‚ β”‚ β”‚19~28β”‚  0  β”‚65,906β”‚...β”‚...β”‚...β”‚   β”‚ β”‚
β”‚ β”‚ β”‚29~40β”‚  5  β”‚65,906β”‚...β”‚...β”‚...β”‚   β”‚ β”‚
β”‚ β”‚ β”‚ ... β”‚ ... β”‚ ... β”‚...β”‚...β”‚...β”‚   β”‚ β”‚
β”‚ β”‚ β”β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”¤   β”‚ β”‚
β”‚ β”‚ β”‚μ†κ³„ β”‚ 93  β”‚9,911,218β”‚...β”‚...β”‚   β”‚ β”‚
β”‚ β”‚ β””β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”   β”‚ β”‚
β”‚ β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚ β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚ β”‚ λ‹΄λ‹Ήμ: μ΄κ·Όμ¬                        β”‚ β”‚
β”‚ β”‚ ... (λ™μΌ κµ¬μ΅°)                       β”‚ β”‚
β”‚ β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚ β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚ β”‚ ν•©κ³„                                 β”‚ β”‚
β”‚ β”‚ ...                                  β”‚ β”‚
β”‚ β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ [λ³΄ν—λ£ μ…λ ¥] λ²„νΌ (λ¨λ‹¬ μ—΄κΈ°)           β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

#### 2.2.2 JavaScript λ¨λ“
**νμΌ**: `disk-cms/public/js/insurance/kj-premium-by-manager.js`

**μ£Όμ” ν•¨μ**:
- `loadPremiumByManager(certi)`: API νΈμ¶ λ° λ°μ΄ν„° λ΅λ“
- `renderCertiInfo(data)`: μ¦κ¶ μƒμ„Έ μ •λ³΄ λ λ”λ§
- `renderManagerTables(data)`: λ‹΄λ‹Ήμλ³„ ν…μ΄λΈ” λ λ”λ§
- `calculateSubtotal(managerData)`: λ‹΄λ‹Ήμλ³„ μ†κ³„ κ³„μ‚°
- `calculateGrandTotal(allManagers)`: μ „μ²΄ ν•©κ³„ κ³„μ‚°

---

## π“ λ°μ΄ν„° νλ¦„

### 3.1 λ°μ΄ν„° μ΅°ν νλ¦„
```
ν”„λ΅ νΈμ—”λ“ (kj-premium-by-manager.html)
  β†“
Node.js ν”„λ΅μ‹ (/api/insurance/kj-premium/by-manager)
  β†“
PHP λ°±μ—”λ“ (kj-premium-by-manager.php)
  β†“
MySQL λ°μ΄ν„°λ² μ΄μ¤
  β”β”€ 2012Certi (μ¦κ¶ μ •λ³΄)
  β”β”€ 2012DaeriMember (λ€λ¦¬κΈ°μ‚¬ μ •λ³΄)
  β”β”€ 2012DaeriCompany (λ€λ¦¬μ΄μ „νμ‚¬ μ •λ³΄)
  β”β”€ 2012Member (λ‹΄λ‹Ήμ μ •λ³΄)
  β”β”€ 2019rate (ν• μΈν• μ¦λ¥ )
  β”β”€ kj_insurance_premium_data (λ³΄ν—λ£ λ°μ΄ν„°)
  β””β”€ kj_premium_data (μ›”λ³΄ν—λ£ λ°μ΄ν„°)
```

### 3.2 κ³„μ‚° λ΅μ§ νλ¦„
```
1. μ¦κ¶ μ •λ³΄ μ΅°ν (2012Certi)
   β†“
2. kj_insurance_premium_data ν…μ΄λΈ”μ—μ„ μ—°λ Ή κµ¬κ°„ μ΅°ν (policyNum = μ¦κ¶λ²νΈ)
   β†“
3. κ° μ—°λ Ή κµ¬κ°„λ³„ μ²λ¦¬:
   a. κ° λ‹΄λ‹Ήμ(1~4)λ³„λ΅:
      - λ‹΄λ‹Ήμ μ •λ³΄ μ΅°ν (2012Member)
      - ν•΄λ‹Ή μ—°λ Ή κµ¬κ°„μ λ€λ¦¬κΈ°μ‚¬ μ΅°ν (2012DaeriMember + 2012DaeriCompany)
      - κ° λ€λ¦¬κΈ°μ‚¬λ³„ ν• μΈν• μ¦λ¥  μ μ© (2019rate λλ” 2012DaeriMember.rate)
      - νμ‚¬λ³΄ν—λ£ κ³„μ‚°: Ξ£(1/10λ³΄ν—λ£ Γ— ν• μΈν• μ¦λ¥ )
      - μ›”λ³΄ν—λ£ κ³„μ‚°: Ξ£(kj_premium_data.monthly_premium_total Γ— ν• μΈν• μ¦λ¥ )
      - μ†κ³„ κ³„μ‚°
   b. λ€λ¦¬κΈ°μ‚¬ μΈμ›μ΄ 0μΈ λ‹΄λ‹Ήμλ” μ μ™Έ
   β†“
4. μ „μ²΄ ν•©κ³„ κ³„μ‚°
```

---

## π”§ κΈ°μ  μ¤νƒ

### λ°±μ—”λ“
- **PHP**: PDO κΈ°λ°, Prepared Statement μ‚¬μ©
- **λ°μ΄ν„°λ² μ΄μ¤**: MySQL 8.0
- **μ‘λ‹µ ν•μ‹**: JSON (UTF-8)

### ν”„λ΅ νΈμ—”λ“
- **ν…ν”λ¦Ώ μ‹μ¤ν…**: `sj-template-loader.js`
- **UI ν”„λ μ„μ›ν¬**: Bootstrap 5
- **JavaScript**: ES6+ (Vanilla JS)
- **μ¤νƒ€μΌ**: `sj-styles.css`

---

## π“ κµ¬ν„ λ‹¨κ³„

### Phase 1: λ°±μ—”λ“ API ν™•μ¥ (μ°μ„ μμ„ 1) β… **μ™„λ£**
- [x] `kj-policy-stats.php` νμΌμ— λ‹΄λ‹Ήμλ³„ κΈ°λ¥ μ¶”κ°€
- [x] `by_manager` νλΌλ―Έν„° μ²λ¦¬ λ΅μ§ μ¶”κ°€
- [x] μ¦κ¶ μ •λ³΄ μ΅°ν λ΅μ§ μ¶”κ°€ (`certi_info`)
- [x] λ‹΄λ‹Ήμλ³„ λ°μ΄ν„° μ΅°ν λ΅μ§ κµ¬ν„
- [x] ν• μΈν• μ¦λ¥  μ μ© λ΅μ§ κµ¬ν„ (2019rate μ°μ„ , μ—†μΌλ©΄ 2012DaeriMember.rate)
- [x] λ³΄ν—λ£ κ³„μ‚° λ΅μ§ κµ¬ν„ (νμ‚¬λ³΄ν—λ£, μ›”λ³΄ν—λ£)
- [x] μ†κ³„/ν•©κ³„ κ³„μ‚° λ΅μ§ κµ¬ν„
- [x] λ€λ¦¬κΈ°μ‚¬ μΈμ›μ΄ 0μΈ λ‹΄λ‹Ήμ μ μ™Έ λ΅μ§ κµ¬ν„
- [x] κΈ°μ΅΄ κΈ°λ¥ νΈν™μ„± μ μ§€ (`by_manager=0` λλ” μƒλµ μ‹)

**μ°Έκ³ **: Phase 1 κ°λ°μ΄ μ™„λ£λμ—μµλ‹λ‹¤. μƒμ„Έ ν„ν™©μ€ `kj-λ³΄ν—λ£-μ…λ ¥-νμ΄μ§€-κ³ λ„ν™”-ν„ν™©.md` νμΌμ„ μ°Έμ΅°ν•μ„Έμ”.

### Phase 2: Node.js ν”„λ΅μ‹ μ—°λ™ (μ°μ„ μμ„ 2)
- [ ] κΈ°μ΅΄ λΌμ°νΈμ— `by_manager` νλΌλ―Έν„° μ „λ‹¬ ν™•μΈ
- [ ] ν”„λ΅μ‹ ν…μ¤νΈ

### Phase 3: ν”„λ΅ νΈμ—”λ“ κµ¬ν„ (μ°μ„ μμ„ 3)
- [ ] HTML νμ΄μ§€/λ¨λ‹¬ κµ¬μ΅° μƒμ„±
- [ ] JavaScript λ¨λ“ κµ¬ν„
- [ ] ν…μ΄λΈ” λ λ”λ§ λ΅μ§ κµ¬ν„
- [ ] μ¤νƒ€μΌλ§ (Bootstrap κΈ°λ°)

### Phase 4: ν†µν•© ν…μ¤νΈ (μ°μ„ μμ„ 4)
- [ ] μ „μ²΄ ν”λ΅μ° ν…μ¤νΈ
- [ ] λ³΄ν—μ‚¬λ³„ ν…μ¤νΈ (KB, ν„λ€, λ΅―λ°)
- [ ] λ‹΄λ‹Ήμλ³„ λ°μ΄ν„° μ •ν™•μ„± κ²€μ¦
- [ ] ν• μΈν• μ¦λ¥  μ μ© κ²€μ¦

---

## π¨ UI/UX μ„¤κ³„

### 4.1 ν…μ΄λΈ” λ””μμΈ
- **λ‹΄λ‹Ήμλ³„ κµ¬λ¶„**: κ° λ‹΄λ‹Ήμ μ„Ήμ…μ„ μΉ΄λ“ λλ” κµ¬λ¶„μ„ μΌλ΅ λ¶„λ¦¬
- **μ—°λ Ή κµ¬κ°„**: ν–‰ λ‹¨μ„λ΅ ν‘μ‹
- **μ†κ³„ ν–‰**: κµµμ€ ν…λ‘λ¦¬ λλ” λ°°κ²½μƒ‰μΌλ΅ κ°•μ΅°
- **ν•©κ³„ ν–‰**: μµν•λ‹¨μ— λ³„λ„ μ„Ήμ…μΌλ΅ ν‘μ‹

### 4.2 λ°μ‘ν• λ””μμΈ
- **λ°μ¤ν¬ν†±**: μ „μ²΄ ν…μ΄λΈ” ν‘μ‹
- **νƒλΈ”λ¦Ώ**: μ¤ν¬λ΅¤ κ°€λ¥ν• ν…μ΄λΈ”
- **λ¨λ°”μΌ**: μΉ΄λ“ ν•νƒλ΅ λ³€ν™ (λ‹΄λ‹Ήμλ³„ μΉ΄λ“)

### 4.3 μΈν„°λ™μ…
- **λ΅λ”© μƒνƒ**: μ¤ν”Όλ„ ν‘μ‹
- **μ—λ¬ μ²λ¦¬**: ν† μ¤νΈ λ©”μ‹μ§€ λλ” μ•λ¦Ό
- **λ°μ΄ν„° μƒλ΅κ³ μΉ¨**: λ²„νΌ ν΄λ¦­ μ‹ μ¬μ΅°ν

---

## π” μ£Όμ” κ³ λ ¤μ‚¬ν•­

### 5.1 μ„±λ¥ μµμ ν™”
- **μΏΌλ¦¬ μµμ ν™”**: JOIN μµμ†ν™”, μΈλ±μ¤ ν™μ©
- **μΊμ‹±**: μ¦κ¶ μ •λ³΄λ” μμ£Ό λ³€κ²½λμ§€ μ•μΌλ―€λ΅ μΊμ‹± κ³ λ ¤
- **νμ΄μ§•**: λ€λ‰ λ°μ΄ν„° μ²λ¦¬ μ‹ νμ΄μ§• κ³ λ ¤

### 5.2 λ°μ΄ν„° μ •ν™•μ„±
- **ν• μΈν• μ¦λ¥ **: `2019rate` ν…μ΄λΈ” μ°μ„ , μ—†μΌλ©΄ `2012DaeriMember.rate` μ‚¬μ©
- **μ—°λ Ή κµ¬κ°„**: κ³„μ•½μΌ(`sigi`) κΈ°μ¤€μΌλ΅ κµ¬κ°„ κ²°μ •
- **λ³΄ν—λ£ κ³„μ‚°**: `kj_insurance_premium_data` μ°μ„ , μ—†μΌλ©΄ `2012Certi` ν…μ΄λΈ” μ‚¬μ©

### 5.3 νΈν™μ„±
- **κµ¬λ²„μ „ νΈν™**: κΈ°μ΅΄ XML APIμ™€ λ™μΌν• κ³„μ‚° κ²°κ³Ό λ³΄μ¥
- **λ°μ΄ν„° ν•μ‹**: μ²λ‹¨μ„ μ½¤λ§, μ›ν™” ν‘μ‹

---

## π“ μ°Έκ³ μ‚¬ν•­

### κµ¬λ²„μ „ PHP μ½”λ“ λ¶„μ„ κ²°κ³Ό
1. **λ³΄ν—μ‚¬λ³„ μ—°λ Ή κµ¬κ°„**:
   - KB (3): κ³„μ•½μΌ κΈ°μ¤€ 6κ° λλ” 7κ° κµ¬κ°„
   - ν„λ€ (4): κ³„μ•½μΌ κΈ°μ¤€ 5κ° λλ” 6κ° κµ¬κ°„
   - λ΅―λ° (5): 3κ° κµ¬κ°„ (κ³ μ •)

2. **ν• μΈν• μ¦λ¥  λ§¤ν•‘**:
   - `calculatePersonalRate()` ν•¨μ μ‚¬μ© (kj-endorse-utils.php)
   - `2012DaeriCompany.union_ = 1`μΈ κ²½μ° rate = 1 (ν• μΈν• μ¦ λ¬΄μ‹)

3. **λ³΄ν—λ£ κ³„μ‚°**:
   - `2012Certi` ν…μ΄λΈ”μ `preminun25`, `preminun44` λ“± ν•„λ“ μ‚¬μ©
   - `2012Cpreminum` ν…μ΄λΈ”μ—μ„ κ°μΈλ³„ λ³΄ν—λ£ μ΅°ν
   - ν• μΈν• μ¦λ¥  μ μ© ν›„ ν•©κ³„ κ³„μ‚°

---

## β… μ²΄ν¬λ¦¬μ¤νΈ

### κ°λ° μ „
- [ ] κΈ°νμ• κ²€ν†  λ° μΉμΈ
- [ ] λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ ν™•μΈ
- [ ] κΈ°μ΅΄ API μ‘λ‹µ ν•μ‹ ν™•μΈ

### κ°λ° μ¤‘
- [ ] λ°±μ—”λ“ API κµ¬ν„
- [ ] Node.js ν”„λ΅μ‹ μ—°λ™
- [ ] ν”„λ΅ νΈμ—”λ“ κµ¬ν„
- [ ] λ‹¨μ„ ν…μ¤νΈ

### κ°λ° ν›„
- [ ] ν†µν•© ν…μ¤νΈ
- [ ] μ„±λ¥ ν…μ¤νΈ
- [ ] μ‚¬μ©μ ν…μ¤νΈ
- [ ] λ¬Έμ„ν™”

---

**μ‘μ„±μΌ**: 2025-12-16  
**μ‘μ„±μ**: AI Assistant  
**μƒνƒ**: κΈ°ν λ‹¨κ³„

