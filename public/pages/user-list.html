<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>보험 CMS | 직원목록</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- AdminLTE CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/css/adminlte.min.css">
  
  <style>
    /* 기존 스타일 */
    .info-item {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0;
      border-bottom: 1px solid #e9ecef;
    }

    .info-item:last-child {
      border-bottom: none;
    }

    .info-label {
      font-weight: bold;
      color: #495057;
      min-width: 100px;
    }

    .info-value {
      color: #6c757d;
    }

    /* ================ 고도화된 반응형 CSS ================ */
    
    /* 카드형 직원 아이템 (모바일 전용) */
    .employee-card {
      display: none; /* 기본적으로 숨김 */
      background: #fff;
      border: 1px solid #dee2e6;
      border-radius: 0.375rem;
      margin-bottom: 1rem;
      padding: 1rem;
      box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
      transition: all 0.15s ease-in-out;
    }

    .employee-card:hover {
      box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    /* 카드 헤더 (1행) */
    .employee-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid #e9ecef;
    }

    .employee-name {
      font-size: 1.1rem;
      font-weight: 600;
      color: #495057;
      margin: 0;
    }

    .employee-status {
      flex-shrink: 0;
    }

    /* 카드 바디 (2행) */
    /* 기존 employee-card-body 수정 */
.employee-card-body {
  display: flex;
  flex-direction: column;  /* grid에서 column으로 변경 */
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}

/* 새로 추가할 CSS */
.employee-info-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;  /* 화면이 작으면 줄바꿈 */
}

.employee-info-separator {
  color: #dee2e6;
  margin: 0 0.25rem;
}

/* 기존 employee-info-item 삭제하고 이것들로 교체 */
.employee-info-label {
  font-size: 0.75rem;
  color: #6c757d;
  font-weight: 600;
  min-width: auto;
}

.employee-info-value {
  font-size: 0.875rem;
  color: #495057;
  font-weight: 500;
  margin-right: 0.5rem;
}

    /* 카드 푸터 (3행) */
    .employee-card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 0.5rem;
      border-top: 1px solid #f8f9fa;
    }

    .employee-meta {
      font-size: 0.75rem;
      color: #6c757d;
    }

    .employee-actions {
      display: flex;
      gap: 0.25rem;
    }

    /* 태블릿 및 데스크톱에서는 테이블 표시 */
    .table-view {
      display: block;
    }

    .card-view {
      display: none;
    }

    /* 모바일 (768px 미만) */
    @media (max-width: 767px) {
      /* 테이블 숨기고 카드 표시 */
      .table-view {
        display: none;
      }
      
      .card-view {
        display: block;
      }

      .employee-card {
        display: block;
      }

      /* 검색 및 필터 영역 조정 */
      .btn-mobile {
        width: 100%;
        margin-bottom: 0.5rem;
      }
      
      .mobile-search {
        margin-bottom: 1rem;
      }
      
      .card-body {
        padding: 0.75rem;
      }

      /* 컨테이너 패딩 조정 */
      .container-fluid {
        padding-left: 10px;
        padding-right: 10px;
      }
    }

    /* 초소형 모바일에서 카드 레이아웃 조정 */
    @media (max-width: 575px) {
      .employee-card-body {
        grid-template-columns: 1fr; /* 1열로 변경 */
      }
      
      .employee-card {
        padding: 0.75rem;
      }
      
      .employee-name {
        font-size: 1rem;
      }
    }

    /* 테이블 반응형 (태블릿 이상) */
    @media (min-width: 768px) {
      .table th,
      .table td {
        white-space: nowrap;
      }
    }
  </style>
</head>

<body class="hold-transition sidebar-mini layout-fixed">
  <div class="wrapper">
    
    <!-- 로딩 화면 -->
    <div class="preloader flex-column justify-content-center align-items-center">
      <img class="animation__shake" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjNjY3ZWVhIi8+Cjwvc3ZnPgo=" alt="로딩중" height="60" width="60">
    </div>

    <!-- 
    ===================================================================
    이 부분들은 template-loader.js가 자동으로 채워줍니다
    직접 수정하지 마세요!
    ===================================================================
    -->
    <div id="header-container"></div>
    <div id="sidebar-container"></div>

    <!-- 
    ===================================================================
    여기서부터 페이지마다 다른 내용을 작성하세요
    ===================================================================
    -->
    <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <div class="content-header">
        <div class="container-fluid">
          <div class="row mb-2">
            <div class="col-sm-12">
              <ol class="breadcrumb">
                <!-- template-loader.js가 동적으로 업데이트 -->
              </ol>
            </div>
          </div>
        </div>
      </div>

      <!-- 메인 콘텐츠 부분만 수정 -->
      <section class="content">
        <div class="container-fluid">
          <!-- 검색 및 필터 영역 -->
          <div class="row mb-3">
            <!-- 검색 입력 -->
            <div class="col-12 col-md-6 mb-2 mb-md-0">
              <div class="input-group mobile-search">
                <input type="text" class="form-control" id="searchInput" placeholder="이름, 이메일, 부서로 검색...">
                <div class="input-group-append">
                  <button class="btn btn-primary" type="button" id="searchBtn">
                    <i class="fas fa-search"></i>
                    <span class="d-none d-sm-inline ml-1">검색</span>
                  </button>
                </div>
              </div>
            </div>
            
            <!-- 부서 필터 -->
            <div class="col-6 col-md-3 mb-2 mb-md-0">
              <select class="form-control" id="departmentFilter">
                <option value="">전체 부서</option>
                <!-- 동적으로 로드 -->
              </select>
            </div>
            
            <!-- 직원 추가 버튼 -->
            <div class="col-6 col-md-3">
              <button type="button" class="btn btn-success btn-mobile" id="addUserBtn">
                <i class="fas fa-plus"></i>
                <span class="d-none d-sm-inline ml-1">직원 추가</span>
              </button>
            </div>
          </div>

          <!-- 직원 목록 -->
          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">
                    <i class="fas fa-users mr-2"></i>
                    직원 목록
                  </h3>
                  <div class="card-tools">
                    <span class="badge badge-info" id="totalCount">총 0명</span>
                  </div>
                </div>
                <div class="card-body">
                  <!-- 로딩 스피너 -->
                  <div id="loadingSpinner" class="text-center" style="display: none;">
                    <div class="spinner-border" role="status">
                      <span class="sr-only">로딩중...</span>
                    </div>
                  </div>

                  <!-- 테이블 뷰 (태블릿 이상에서 표시) -->
                  <div class="table-view">
                    <div class="table-responsive">
                      <table class="table table-bordered table-striped table-hover" id="userTable">
                        <thead class="thead-light">
                          <tr>
                            <th class="d-none d-md-table-cell">사번</th>
                            <th>이름</th>
                            <th class="d-none d-sm-table-cell">이메일</th>
                            <th>부서</th>
                            <th class="d-none d-lg-table-cell">직급</th>
                            <th class="d-none d-xl-table-cell">근무형태</th>
                            <th>상태</th>
                            <th class="d-none d-lg-table-cell">가입일</th>
                            <th>관리</th>
                          </tr>
                        </thead>
                        <tbody id="userTableBody">
                          <!-- 동적으로 로드 -->
                        </tbody>
                      </table>
                    </div>
                  </div>

                  <!-- 카드 뷰 (모바일에서만 표시) -->
                  <div class="card-view" id="employeeCards">
                    <!-- JavaScript에서 동적으로 생성 -->
                  </div>

                  <!-- 페이지네이션 -->
                  <nav aria-label="Page navigation">
                    <ul class="pagination justify-content-center flex-wrap" id="pagination">
                      <!-- 동적으로 생성 -->
                    </ul>
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- 
    ===================================================================
    이 부분도 template-loader.js가 자동으로 채워줍니다
    ===================================================================
    -->
    <div id="footer-container"></div>
    
    <!-- 사용자 상세보기/수정/추가 모달 -->
    <div class="modal fade" id="userModal" tabindex="-1" role="dialog" aria-labelledby="userModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="userModalLabel">
              <i class="fas fa-user mr-2"></i>
              <span id="modalTitle">직원 정보</span>
            </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div id="userModalContent">
              <!-- 동적으로 생성 -->
            </div>
          </div>
          <div class="modal-footer">
            <div id="modalActions">
              <!-- 동적으로 생성 -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript 라이브러리들 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/js/adminlte.min.js"></script>
  
  <!-- 템플릿 로더 (필수!) -->
  <script src="../js/template-loader.js"></script>
  
  <!-- 페이지별 JavaScript (필요시) -->
  <script src="../js/pages/user-list.js"></script>

  <script>
    $(document).ready(async function() {
      try {
        // 1단계: 템플릿 시스템 초기화 ('user-list'는 sidebar.html의 data-menu 값)
        await window.templateLoader.initializePage('user-list');
        
        // 2단계: 직원목록 페이지 기능 초기화
        await window.userListManager.initialize();
        
        console.log('직원목록 페이지 초기화 완료!');
        
      } catch (error) {
        console.error('페이지 초기화 실패:', error);
      }
    });
  </script>
</body>
</html>